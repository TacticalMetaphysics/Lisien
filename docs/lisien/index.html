<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API &#8212; Lisien 0.23.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=b4d3b1f5"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Elide" href="../elide/index.html" />
    <link rel="prev" title="Design" href="design.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api">
<h1>API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h1>
<p>Here is the portion of Lisien’s codebase that game developers should be
familiar with. Generally, you should access everything through an
<a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.engine.Engine</span></code></a> object. The exception is when Lisien is not
running in the same process, in which case, you’ll need
<code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.proxy.manager.EngineProxyManager</span></code> to make you a proxy to it.
But <code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.proxy.engine.EngineProxy</span></code> works just like
<a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.engine.Engine</span></code></a>, for the most part.</p>
<section id="module-lisien.engine">
<span id="engine"></span><h2>engine<a class="headerlink" href="#module-lisien.engine" title="Link to this heading">¶</a></h2>
<p>The “engine” of lisien is an object relational mapper with special
stores for game data and entities, as well as properties for manipulating the
flow of time.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.engine.Engine">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.engine.</span></span><span class="sig-name descname"><span class="pre">Engine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_neighbors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_portals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_key_sets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><span class="pre">FunctionStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><span class="pre">FunctionStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><span class="pre">FunctionStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><span class="pre">FunctionStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><span class="pre">FunctionStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_rules_journal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict[str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str]</span> <span class="pre">|</span> <span class="pre">None</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.14)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">partial</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">NOTHING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trunk</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'trunk'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.14)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">AbstractSchema</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">&lt;class</span> <span class="pre">'lisien.engine.NullSchema'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_on_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforce_end_of_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><span class="pre">Logger</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">NOTHING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.futures.Executor" title="lisien.futures.Executor"><span class="pre">Executor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">NOTHING</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/engine.html#Engine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine" title="Link to this definition">¶</a></dt>
<dd><p>Lisien, the Life Simulator Engine.</p>
<dl class="py property">
<dt class="sig sig-object py" id="lisien.Engine.branch">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">branch</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Branch</span></span><a class="headerlink" href="#lisien.Engine.branch" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.is_ancestor_of">
<span class="sig-name descname"><span class="pre">is_ancestor_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Branch</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#lisien.engine.Engine.is_ancestor_of" title="Link to this definition">¶</a></dt>
<dd><p>Return whether <code class="docutils literal notranslate"><span class="pre">child</span></code> is a branch descended from <code class="docutils literal notranslate"><span class="pre">parent</span></code></p>
<p>At any remove.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.Engine.turn">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">turn</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Turn</span></span><a class="headerlink" href="#lisien.Engine.turn" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.Engine.tick">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">tick</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tick</span></span><a class="headerlink" href="#lisien.Engine.tick" title="Link to this definition">¶</a></dt>
<dd><p>A counter of how many changes have occurred this turn.</p>
<p>Can be set manually, but is more often set to the last tick in a turn
as a side effect of setting <code class="docutils literal notranslate"><span class="pre">turn</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.time">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">time</span></span><a class="headerlink" href="#lisien.engine.Engine.time" title="Link to this definition">¶</a></dt>
<dd><p>A tuple-like object holding the <em>current</em> <code class="docutils literal notranslate"><span class="pre">branch,</span> <span class="pre">turn,</span> <span class="pre">tick</span></code> –
which may not be the same as when last you accessed <code class="docutils literal notranslate"><span class="pre">time</span></code>.</p>
<p>To register a function <code class="docutils literal notranslate"><span class="pre">time_passes</span></code> when the time changes, pass
it to <code class="docutils literal notranslate"><span class="pre">time.connect</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">time_passes</span><span class="p">)</span>
</pre></div>
</div>
<p>Or decorate it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@engine</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">connect</span>
<span class="k">def</span><span class="w"> </span><span class="nf">time_passes</span><span class="p">(</span>
    <span class="n">time</span><span class="p">,</span>
    <span class="n">then</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
    <span class="n">now</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>It will be passed the time object itself, as well as tuples of the
previous time <code class="docutils literal notranslate"><span class="pre">then</span></code> and the current time <code class="docutils literal notranslate"><span class="pre">now</span></code>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.rule">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">rule</span></span><a class="headerlink" href="#lisien.engine.Engine.rule" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of all <a class="reference internal" href="#lisien.rule.Rule" title="lisien.rule.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.rule.Rule</span></code></a> objects that have been made.</p>
<p>It’s possible to make new rules with this. It works the same way as the
<code class="docutils literal notranslate"><span class="pre">rule</span></code> decorator that all Lisien entities have, but doesn’t result
in the rule being assigned to anything:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@engine</span><span class="o">.</span><span class="n">rule</span>
<span class="k">def</span><span class="w"> </span><span class="nf">do_something</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">do_something</span><span class="p">))</span>
</pre></div>
</div>
<p>This prints <code class="docutils literal notranslate"><span class="pre">&lt;class</span> <span class="pre">'lisien.rule.Rule'&gt;</span></code>. You’ll need to put the rule
in a rulebook yourself.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.rulebook">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">rulebook</span></span><a class="headerlink" href="#lisien.engine.Engine.rulebook" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.rulebook.Rulebook</span></code> objects that exist.</p>
<p>Rulebooks must be assigned to entities’ <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property before
they will run, but each entity gets its own rulebook by default.
Those rulebooks appear here when the entity is created.</p>
<p>Rules created with an entity’s <code class="docutils literal notranslate"><span class="pre">&#64;rule</span></code> decorator go on the end of
the entity’s rulebook. You can reorder that rulebook the same way as
a Python list, or put <a class="reference internal" href="#lisien.rule.Rule" title="lisien.rule.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.rule.Rule</span></code></a> objects in it yourself.
For convenience, <code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.rulebook.Rulebook</span></code> will interpret
the names of rules as if they were the <a class="reference internal" href="#lisien.rule.Rule" title="lisien.rule.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.rule.Rule</span></code></a>
by that name.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.eternal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">eternal</span></span><a class="headerlink" href="#lisien.engine.Engine.eternal" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of arbitrary data, not sensitive to changes in <a class="reference internal" href="#lisien.engine.Engine.time" title="lisien.engine.Engine.time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">time</span></code></a>.</p>
<p>Data kept here will be stored in the same database as the game itself,
and will be exported with all the rest of the game’s data if you call
<a class="reference internal" href="#lisien.engine.Engine.export" title="lisien.engine.Engine.export"><code class="xref py py-meth docutils literal notranslate"><span class="pre">export()</span></code></a>. This makes <a class="reference internal" href="#lisien.engine.Engine.eternal" title="lisien.engine.Engine.eternal"><code class="xref py py-attr docutils literal notranslate"><span class="pre">eternal</span></code></a> a good place to keep
the settings of the game.</p>
<p>There are a few special keys here you shouldn’t set directly:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;branch&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;turn&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;tick&quot;</span></code> hold the last <a class="reference internal" href="#lisien.engine.Engine.time" title="lisien.engine.Engine.time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">time</span></code></a> that</dt><dd><p>the game was at. If you close and reopen the same game, it will
resume at that time.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;language&quot;</span></code> is the three-letter code of the language the game</dt><dd><p>displays to the player. To change it, for instance, to French:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="s2">&quot;fra&quot;</span>
</pre></div>
</div>
<p>Each language’s strings are kept in a JSON file in the game’s
<code class="docutils literal notranslate"><span class="pre">strings/</span></code> directory. These may be edited while the game is not
running, so long as all the expected strings are present when the
game either starts with a given language, or switches to it.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;trunk&quot;</span></code> is the name of the branch that the game started from.</dt><dd><p>To start a new game, which shares no history with the current game,
go to tick 0 of turn 0 and set the engine’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">trunk</span></code> attribute
to the name of your new trunk.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;_lisien_schema_version&quot;</span></code> is an integer used to check compatibility.</p></li>
</ul>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.universal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">universal</span></span><a class="headerlink" href="#lisien.engine.Engine.universal" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of arbitrary data that changes over <a class="reference internal" href="#lisien.engine.Engine.time" title="lisien.engine.Engine.time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">time</span></code></a>.</p>
<p>The state of the randomizer is saved here under the key <code class="docutils literal notranslate"><span class="pre">&quot;rando_state&quot;</span></code>.
It’s a bad idea to set that directly; instead, set <a class="reference internal" href="#lisien.engine.Engine.random_seed" title="lisien.engine.Engine.random_seed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">random_seed</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.trigger">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">trigger</span></span><a class="headerlink" href="#lisien.engine.Engine.trigger" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of, and decorator for, functions that might trigger a rule.</p>
<p>Decorated functions get stored in the mapping as well as a file, so they can be
loaded back in when the game is resumed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.prereq">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">prereq</span></span><a class="headerlink" href="#lisien.engine.Engine.prereq" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of, and decorator for, functions a rule might require to return True for it to run.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.action">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">action</span></span><a class="headerlink" href="#lisien.engine.Engine.action" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of, and decorator for, functions that might manipulate the world state as a result of a rule running.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.method">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#lisien.engine.Engine.method" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of, and decorator for, extension methods to be added to the engine object.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.function">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">function</span></span><a class="headerlink" href="#lisien.engine.Engine.function" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of, and decorator for, generic functions.</p>
<p>Only functions stored in one of these attributes can be used by Lisien’s
workers. <a class="reference internal" href="#id12" title="lisien.engine.Engine.function"><code class="xref py py-attr docutils literal notranslate"><span class="pre">function</span></code></a> will do, if none of the others make sense.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id0">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">rule</span></span><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.rule.Rule" title="lisien.rule.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.rule.Rule</span></code></a> objects, whether applied to an entity or not.</p>
<p>Can also be used as a decorator on functions to make them into new rules, with the decorated function as
their initial action.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.next_turn">
<span class="sig-name descname"><span class="pre">next_turn</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lisien.engine.Engine.next_turn" title="Link to this definition">¶</a></dt>
<dd><p>Make time move forward in the simulation.</p>
<p>Stops when the turn has ended, or a rule returns something non-<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is also a <code class="xref py py-class docutils literal notranslate"><span class="pre">blinker.Signal</span></code>, so you can register functions to be
called when the simulation runs. Pass them to <code class="docutils literal notranslate"><span class="pre">Engine.next_turn.connect(..)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a pair, of which item 0 is the returned value from a rule if applicable (default: <code class="docutils literal notranslate"><span class="pre">[]</span></code>),
and item 1 is a delta describing changes to the simulation resulting from this call.
See the following method, <a class="reference internal" href="#id13" title="lisien.engine.Engine.get_delta"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_delta()</span></code></a>, for a description of the delta format.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.get_delta">
<span class="sig-name descname"><span class="pre">get_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Time</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Branch</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Turn</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Time</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Branch</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Turn</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slow</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DeltaDict</span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.get_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.get_delta" title="Link to this definition">¶</a></dt>
<dd><p>Get a dictionary describing changes to the world.</p>
<p>Most keys will be character names, and their values will be
dictionaries of the character’s stats’ new values, with <code class="docutils literal notranslate"><span class="pre">None</span></code>
for deleted keys. Characters’ dictionaries have special keys
‘nodes’ and ‘edges’ which contain booleans indicating whether
the node or edge has been created (True) or deleted (False), and ‘node_val’ and
‘edge_val’ for the stats of those entities. For edges (also
called portals) these dictionaries are two layers deep, keyed
first by the origin, then by the destination.</p>
<p>Characters also have special keys for the various rulebooks
they have:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'character_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'unit_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'character_thing_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'character_place_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'character_portal_rulebook'</span></code></p></li>
</ul>
<p>And each node and edge may have a ‘rulebook’ stat of its own.
If a node is a thing, it gets a ‘location’; when the ‘location’
is deleted, that means it’s back to being a place.</p>
<p>Keys at the top level that are not character names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'rulebooks'</span></code>, a dictionary keyed by the name of each changed
rulebook, the value being a list of rule names</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'rules'</span></code>, a dictionary keyed by the name of each changed rule,
containing any of the lists <code class="docutils literal notranslate"><span class="pre">'triggers'</span></code>, <code class="docutils literal notranslate"><span class="pre">'prereqs'</span></code>,
and <code class="docutils literal notranslate"><span class="pre">'actions'</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>slow</strong> – Whether to compare entire keyframes. Default <code class="docutils literal notranslate"><span class="pre">False</span></code>,
but we may take that approach anyway, if comparing between branches,
or between times that are far enough apart that a delta assuming
linear time would require <em>more</em> comparisons than comparing keyframes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.advancing">
<span class="sig-name descname"><span class="pre">advancing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.advancing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.advancing" title="Link to this definition">¶</a></dt>
<dd><p>A context manager for when time is moving forward one turn at a time.</p>
<p>Generally, this means that the game is being simulated. The window
of time that’s “really happened” isn’t allowed to grow outside of
this context.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.batch">
<span class="sig-name descname"><span class="pre">batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.batch" title="Link to this definition">¶</a></dt>
<dd><p>A context manager for when you’re creating lots of state.</p>
<p>Reads will be much slower in a batch, but writes will be faster.</p>
<p>You <em>can</em> combine this with <code class="docutils literal notranslate"><span class="pre">advancing</span></code> but it isn’t any faster.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.plan">
<span class="sig-name descname"><span class="pre">plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Plan</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.plan" title="Link to this definition">¶</a></dt>
<dd><p>A context manager for ‘hypothetical’ edits.</p>
<p>Start a block of code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">orm</span><span class="o">.</span><span class="n">plan</span><span class="p">():</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>and any changes you make to the world state within that block will be
‘plans,’ meaning that they are used as defaults. The world will
obey your plan unless you make changes to the same entities outside
the plan, in which case the world will obey those, and cancel any
future plan.</p>
<p>Plans are <em>not</em> canceled when concerned entities are deleted, although
they are unlikely to be followed.</p>
<p>New branches cannot be started within plans. The <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.forward():</span></code>
optimization is disabled within a <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.plan():</span></code> block, so
consider another approach instead of making a very large plan.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">reset=True</span></code> (the default), when the plan block closes,
the time will reset to when it began.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.delete_plan">
<span class="sig-name descname"><span class="pre">delete_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Plan</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.delete_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.delete_plan" title="Link to this definition">¶</a></dt>
<dd><p>Delete the portion of a plan that has yet to occur.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>plan</strong> – integer ID of a plan, as given by
<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">self.plan()</span> <span class="pre">as</span> <span class="pre">plan:</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.snap_keyframe">
<span class="sig-name descname"><span class="pre">snap_keyframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_worker_processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Keyframe</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.snap_keyframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.snap_keyframe" title="Link to this definition">¶</a></dt>
<dd><p>Make a copy of the complete state of the world.</p>
<p>You need to do this occasionally in order to keep time travel
performant.</p>
<p>The keyframe will be saved to the database at the next call to
<code class="docutils literal notranslate"><span class="pre">flush</span></code>.</p>
<p>Return the keyframe by default. With <code class="docutils literal notranslate"><span class="pre">silent=True</span></code>,
return <code class="docutils literal notranslate"><span class="pre">None</span></code>. This is a little faster, and uses a little less
memory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.new_character">
<span class="sig-name descname"><span class="pre">new_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.14)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Graph</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">EdgeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><span class="pre">Character</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.new_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.new_character" title="Link to this definition">¶</a></dt>
<dd><p>Create and return a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>.</p>
<p>See <a class="reference internal" href="#id2" title="lisien.engine.Engine.add_character"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_character()</span></code></a> for details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.add_character">
<span class="sig-name descname"><span class="pre">add_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.14)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Graph</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DiGraph</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">EdgeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.add_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.add_character" title="Link to this definition">¶</a></dt>
<dd><p>Create a new character.</p>
<p>You’ll be able to access it as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code> object by
looking up <code class="docutils literal notranslate"><span class="pre">name</span></code> in my <code class="docutils literal notranslate"><span class="pre">character</span></code> property.</p>
<p><code class="docutils literal notranslate"><span class="pre">data</span></code>, if provided, should be a <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.Graph</span></code>
or <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.DiGraph</span></code> object. The character will be
a copy of it.</p>
<p><code class="docutils literal notranslate"><span class="pre">node</span></code> may be a dictionary of dictionaries representing either
<code class="docutils literal notranslate"><span class="pre">Thing</span></code> objects, if they have a <code class="docutils literal notranslate"><span class="pre">&quot;location&quot;</span></code> key, or else
<code class="docutils literal notranslate"><span class="pre">Place</span></code> objects.</p>
<p><code class="docutils literal notranslate"><span class="pre">edge</span></code> may be a 3-layer dictionary representing <code class="docutils literal notranslate"><span class="pre">Portal</span></code> objects,
connecting mainly <code class="docutils literal notranslate"><span class="pre">Place</span></code> objects together.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">layout=True</span></code>, compute a layout to make the
graph show up nicely in elide.</p>
<p>Any keyword arguments will be set as stats of the new character.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.del_character">
<span class="sig-name descname"><span class="pre">del_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CharName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.del_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.del_character" title="Link to this definition">¶</a></dt>
<dd><p>Mark a graph as deleted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – name of an existing graph</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.turns_when">
<span class="sig-name descname"><span class="pre">turns_when</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qry</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mid_turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">QueryResult</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.14)"><span class="pre">set</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.turns_when"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.turns_when" title="Link to this definition">¶</a></dt>
<dd><p>Return the turns when the query held true</p>
<p>Only the state of the world at the end of the turn is considered.
To include turns where the query held true at some tick, but
became false, set <code class="docutils literal notranslate"><span class="pre">mid_turn=True</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>qry</strong> – a Query, likely constructed by comparing the result
of a call to an entity’s <code class="docutils literal notranslate"><span class="pre">historical</span></code> method with
the output of <code class="docutils literal notranslate"><span class="pre">self.alias(..)</span></code> or another
<code class="docutils literal notranslate"><span class="pre">historical(..)</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.apply_choices">
<span class="sig-name descname"><span class="pre">apply_choices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">choices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perfectionist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.apply_choices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.apply_choices" title="Link to this definition">¶</a></dt>
<dd><p>Validate changes a player wants to make, and apply if acceptable.</p>
<p>Argument <code class="docutils literal notranslate"><span class="pre">choices</span></code> is a list of dictionaries, of which each must
have values for <code class="docutils literal notranslate"><span class="pre">&quot;entity&quot;</span></code> (a lisien entity) and <code class="docutils literal notranslate"><span class="pre">&quot;changes&quot;</span></code>
– the later being a list of lists of pairs. Each change list
is applied on a successive turn, and each pair <code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">value)</span></code>
sets a key on the entity to a value on that turn.</p>
<p>Returns a pair of lists containing acceptance and rejection messages,
which the UI may present as it sees fit. They are always in a pair
with the change request as the zeroth item. The message may be None
or a string.</p>
<p>Validator functions may return only a boolean indicating acceptance.
If they instead return a pair, the initial boolean indicates
acceptance and the following item is the message.</p>
<p>This function will not actually result in any simulation happening.
It creates a plan. See my <code class="docutils literal notranslate"><span class="pre">plan</span></code> context manager for the precise
meaning of this.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">dry_run=True</span></code> just return the acceptances and rejections
without really planning anything. With <code class="docutils literal notranslate"><span class="pre">perfectionist=True</span></code> apply
changes if and only if all of them are accepted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.flush" title="Link to this definition">¶</a></dt>
<dd><p>Write pending changes to disk.</p>
<p>You can set a <code class="docutils literal notranslate"><span class="pre">flush_interval</span></code> when you instantiate <code class="docutils literal notranslate"><span class="pre">Engine</span></code>
to call this every so many turns. However, this may cause your game to
hitch up sometimes, so it’s better to call <code class="docutils literal notranslate"><span class="pre">flush</span></code> when you know the
player won’t be running the simulation for a while.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.commit" title="Link to this definition">¶</a></dt>
<dd><p>Write the state of all graphs and commit the transaction.</p>
<p>Also saves the current branch, turn, and tick.</p>
<p>Call with <code class="docutils literal notranslate"><span class="pre">unload=False</span></code> if you want to keep the written state in memory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.close" title="Link to this definition">¶</a></dt>
<dd><p>Commit changes and close the database</p>
<p>This will be useless thereafter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.unload">
<span class="sig-name descname"><span class="pre">unload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.unload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.unload" title="Link to this definition">¶</a></dt>
<dd><p>Remove everything from memory that can be removed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.export">
<span class="sig-name descname"><span class="pre">export</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.export"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.export" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.from_archive">
<span class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">from_archive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.collections.StringStore" title="lisien.collections.StringStore"><span class="pre">StringStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TriggerStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PrereqStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ActionStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GenericFunctionStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MethodStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trunk</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Branch</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.14)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">AbstractSchema</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">&lt;class</span> <span class="pre">'lisien.engine.NullSchema'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_rules_journal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_on_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforce_end_of_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><span class="pre">Logger</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sub</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.14)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">partial</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.futures.Executor" title="lisien.futures.Executor"><span class="pre">Executor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><span class="pre">Engine</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.from_archive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.from_archive" title="Link to this definition">¶</a></dt>
<dd><p>Make a new Lisien engine out of an archive exported from another engine</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.RulesTodoType">
<span class="sig-name descname"><span class="pre">RulesTodoType</span></span><a class="headerlink" href="#lisien.engine.Engine.RulesTodoType" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RulebookName</span></code>], <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>[<a class="reference internal" href="#lisien.rule.Rule" title="lisien.rule.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Callable</span></code>[[…], <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-type docutils literal notranslate"><span class="pre">EntityKey</span></code>]]]]]</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">action</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ActionStore</span></span><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd><p>Module containing action functions, taking a Lisien entity and 
mutating it (and possibly the rest of the world). If absent, we’ll use a 
<a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.collections.FunctionStore</span></code></a> to keep them in a .py file in 
the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">add_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.14)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Graph</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DiGraph</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">EdgeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.add_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd><p>Create a new character.</p>
<p>You’ll be able to access it as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code> object by
looking up <code class="docutils literal notranslate"><span class="pre">name</span></code> in my <code class="docutils literal notranslate"><span class="pre">character</span></code> property.</p>
<p><code class="docutils literal notranslate"><span class="pre">data</span></code>, if provided, should be a <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.Graph</span></code>
or <code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.DiGraph</span></code> object. The character will be
a copy of it.</p>
<p><code class="docutils literal notranslate"><span class="pre">node</span></code> may be a dictionary of dictionaries representing either
<code class="docutils literal notranslate"><span class="pre">Thing</span></code> objects, if they have a <code class="docutils literal notranslate"><span class="pre">&quot;location&quot;</span></code> key, or else
<code class="docutils literal notranslate"><span class="pre">Place</span></code> objects.</p>
<p><code class="docutils literal notranslate"><span class="pre">edge</span></code> may be a 3-layer dictionary representing <code class="docutils literal notranslate"><span class="pre">Portal</span></code> objects,
connecting mainly <code class="docutils literal notranslate"><span class="pre">Place</span></code> objects together.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">layout=True</span></code>, compute a layout to make the
graph show up nicely in elide.</p>
<p>Any keyword arguments will be set as stats of the new character.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">advancing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.advancing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd><p>A context manager for when time is moving forward one turn at a time.</p>
<p>Generally, this means that the game is being simulated. The window
of time that’s “really happened” isn’t allowed to grow outside of
this context.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">apply_choices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">choices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perfectionist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.apply_choices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id4" title="Link to this definition">¶</a></dt>
<dd><p>Validate changes a player wants to make, and apply if acceptable.</p>
<p>Argument <code class="docutils literal notranslate"><span class="pre">choices</span></code> is a list of dictionaries, of which each must
have values for <code class="docutils literal notranslate"><span class="pre">&quot;entity&quot;</span></code> (a lisien entity) and <code class="docutils literal notranslate"><span class="pre">&quot;changes&quot;</span></code>
– the later being a list of lists of pairs. Each change list
is applied on a successive turn, and each pair <code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">value)</span></code>
sets a key on the entity to a value on that turn.</p>
<p>Returns a pair of lists containing acceptance and rejection messages,
which the UI may present as it sees fit. They are always in a pair
with the change request as the zeroth item. The message may be None
or a string.</p>
<p>Validator functions may return only a boolean indicating acceptance.
If they instead return a pair, the initial boolean indicates
acceptance and the following item is the message.</p>
<p>This function will not actually result in any simulation happening.
It creates a plan. See my <code class="docutils literal notranslate"><span class="pre">plan</span></code> context manager for the precise
meaning of this.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">dry_run=True</span></code> just return the acceptances and rejections
without really planning anything. With <code class="docutils literal notranslate"><span class="pre">perfectionist=True</span></code> apply
changes if and only if all of them are accepted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">batch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id5" title="Link to this definition">¶</a></dt>
<dd><p>A context manager for when you’re creating lots of state.</p>
<p>Reads will be much slower in a batch, but writes will be faster.</p>
<p>You <em>can</em> combine this with <code class="docutils literal notranslate"><span class="pre">advancing</span></code> but it isn’t any faster.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.cache_key_sets">
<span class="sig-name descname"><span class="pre">cache_key_sets</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><a class="headerlink" href="#lisien.engine.Engine.cache_key_sets" title="Link to this definition">¶</a></dt>
<dd><p>Number of sorted key sets to cache</p>
<p>When iterating over a stored set of keys–for instance, the set of rules
assigned to some entity–Lisien always iterates in the same order.
That means it has to sort a lot, which may take a long time. It caches
the results of those sorting operations. <a class="reference internal" href="#lisien.engine.Engine.cache_key_sets" title="lisien.engine.Engine.cache_key_sets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cache_key_sets</span></code></a> controls
how big that cache is.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.cache_neighbors">
<span class="sig-name descname"><span class="pre">cache_neighbors</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><a class="headerlink" href="#lisien.engine.Engine.cache_neighbors" title="Link to this definition">¶</a></dt>
<dd><p>Number of nodes to cache the neighbors of</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.cache_nodes">
<span class="sig-name descname"><span class="pre">cache_nodes</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><a class="headerlink" href="#lisien.engine.Engine.cache_nodes" title="Link to this definition">¶</a></dt>
<dd><p>Number of node objects to cache</p>
<p>They may be either <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> or <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.cache_portals">
<span class="sig-name descname"><span class="pre">cache_portals</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><a class="headerlink" href="#lisien.engine.Engine.cache_portals" title="Link to this definition">¶</a></dt>
<dd><p>Number of portal objects to cache</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.char_cls">
<span class="sig-name descname"><span class="pre">char_cls</span></span><a class="headerlink" href="#lisien.engine.Engine.char_cls" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><a class="headerlink" href="#lisien.engine.Engine.clear" title="Link to this definition">¶</a></dt>
<dd><p>Whether to delete <em>any and all</em> existing data and code in <code class="docutils literal notranslate"><span class="pre">prefix</span></code> 
and the database. Use with caution!</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id6" title="Link to this definition">¶</a></dt>
<dd><p>Commit changes and close the database</p>
<p>This will be useless thereafter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id7">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id7" title="Link to this definition">¶</a></dt>
<dd><p>Write the state of all graphs and commit the transaction.</p>
<p>Also saves the current branch, turn, and tick.</p>
<p>Call with <code class="docutils literal notranslate"><span class="pre">unload=False</span></code> if you want to keep the written state in memory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.commit_interval">
<span class="sig-name descname"><span class="pre">commit_interval</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.commit_interval" title="Link to this definition">¶</a></dt>
<dd><p>Lisien will commit changes to disk every <code class="docutils literal notranslate"><span class="pre">commit_interval</span></code> turns. If 
<code class="docutils literal notranslate"><span class="pre">None</span></code> (the default), only commit on close or manual call to 
<code class="docutils literal notranslate"><span class="pre">commit</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.connect_args">
<span class="sig-name descname"><span class="pre">connect_args</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.connect_args" title="Link to this definition">¶</a></dt>
<dd><p>Dictionary of keyword arguments for the database connection. Only 
meaningful when combined with <code class="docutils literal notranslate"><span class="pre">connect_string</span></code>. For details, see:
<a class="reference external" href="https://docs.sqlalchemy.org/en/20/core/engines.html#custom-dbapi-args">https://docs.sqlalchemy.org/en/20/core/engines.html#custom-dbapi-args</a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.connect_string">
<span class="sig-name descname"><span class="pre">connect_string</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.connect_string" title="Link to this definition">¶</a></dt>
<dd><p>URL for a database to connect to. Leave it as the default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, 
to use the ParquetDB database in the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>, if supplied. This uses 
SQLAlchemy’s URL structure: 
<a class="reference external" href="https://docs.sqlalchemy.org/en/20/core/engines.html#database-urls">https://docs.sqlalchemy.org/en/20/core/engines.html#database-urls</a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.database">
<span class="sig-name descname"><span class="pre">database</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a></span><a class="headerlink" href="#lisien.engine.Engine.database" title="Link to this definition">¶</a></dt>
<dd><p>The database connector to use. By default, Lisien will construct 
a database connector based on the other arguments: SQLAlchemy if a 
<code class="docutils literal notranslate"><span class="pre">connect_string</span></code> is provided; if not, but a <code class="docutils literal notranslate"><span class="pre">prefix</span></code> is provided, 
then ParquetDB; or, if <code class="docutils literal notranslate"><span class="pre">prefix</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then an in-memory 
database. You may use the class of the connector, rather than an
instance. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, an in-memory database will be used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id8">
<span class="sig-name descname"><span class="pre">del_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CharName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.del_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id8" title="Link to this definition">¶</a></dt>
<dd><p>Mark a graph as deleted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – name of an existing graph</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id9">
<span class="sig-name descname"><span class="pre">delete_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Plan</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.delete_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id9" title="Link to this definition">¶</a></dt>
<dd><p>Delete the portion of a plan that has yet to occur.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>plan</strong> – integer ID of a plan, as given by
<code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">self.plan()</span> <span class="pre">as</span> <span class="pre">plan:</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.enforce_end_of_time">
<span class="sig-name descname"><span class="pre">enforce_end_of_time</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><a class="headerlink" href="#lisien.engine.Engine.enforce_end_of_time" title="Link to this definition">¶</a></dt>
<dd><p>Whether to raise an exception when time travelling to a point after 
the time that’s been simulated. Default <code class="docutils literal notranslate"><span class="pre">True</span></code>. You normally want this, 
but it could cause problems if you use something other than Lisien’s 
rules engine for game logic.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.executor">
<span class="sig-name descname"><span class="pre">executor</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lisien.futures.Executor" title="lisien.futures.Executor"><span class="pre">Executor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.executor" title="Link to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">LisienExecutor</span></code> instance we’ll use to do
work in parallel. We’ll make our own if one isn’t supplied. Note that
<code class="xref py py-class docutils literal notranslate"><span class="pre">LisienExecutor</span></code> is stateful, and must not be used by multiple
<a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> instances at once.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id10" title="Link to this definition">¶</a></dt>
<dd><p>Write pending changes to disk.</p>
<p>You can set a <code class="docutils literal notranslate"><span class="pre">flush_interval</span></code> when you instantiate <code class="docutils literal notranslate"><span class="pre">Engine</span></code>
to call this every so many turns. However, this may cause your game to
hitch up sometimes, so it’s better to call <code class="docutils literal notranslate"><span class="pre">flush</span></code> when you know the
player won’t be running the simulation for a while.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.flush_interval">
<span class="sig-name descname"><span class="pre">flush_interval</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.flush_interval" title="Link to this definition">¶</a></dt>
<dd><p>Lisien will put pending changes into the database transaction every 
<code class="docutils literal notranslate"><span class="pre">flush_interval</span></code> turns. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, only flush on commit. Default 
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id11">
<span class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">from_archive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.collections.StringStore" title="lisien.collections.StringStore"><span class="pre">StringStore</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TriggerStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PrereqStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ActionStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GenericFunctionStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MethodStore</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trunk</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Branch</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.14)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">AbstractSchema</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">&lt;class</span> <span class="pre">'lisien.engine.NullSchema'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_rules_journal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_on_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforce_end_of_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><span class="pre">Logger</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sub</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.14)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">partial</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><span class="pre">AbstractDatabaseConnector</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.futures.Executor" title="lisien.futures.Executor"><span class="pre">Executor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><span class="pre">Engine</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.from_archive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id11" title="Link to this definition">¶</a></dt>
<dd><p>Make a new Lisien engine out of an archive exported from another engine</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id12">
<span class="sig-name descname"><span class="pre">function</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">GenericFunctionStore</span></span><a class="headerlink" href="#id12" title="Link to this definition">¶</a></dt>
<dd><p>Module containing utility functions; if absent, we’ll use a 
<a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.collections.FunctionStore</span></code></a> to keep them in a .py file in 
the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id13">
<span class="sig-name descname"><span class="pre">get_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Time</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Branch</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Turn</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Time</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Branch</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Turn</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slow</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DeltaDict</span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.get_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id13" title="Link to this definition">¶</a></dt>
<dd><p>Get a dictionary describing changes to the world.</p>
<p>Most keys will be character names, and their values will be
dictionaries of the character’s stats’ new values, with <code class="docutils literal notranslate"><span class="pre">None</span></code>
for deleted keys. Characters’ dictionaries have special keys
‘nodes’ and ‘edges’ which contain booleans indicating whether
the node or edge has been created (True) or deleted (False), and ‘node_val’ and
‘edge_val’ for the stats of those entities. For edges (also
called portals) these dictionaries are two layers deep, keyed
first by the origin, then by the destination.</p>
<p>Characters also have special keys for the various rulebooks
they have:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'character_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'unit_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'character_thing_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'character_place_rulebook'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'character_portal_rulebook'</span></code></p></li>
</ul>
<p>And each node and edge may have a ‘rulebook’ stat of its own.
If a node is a thing, it gets a ‘location’; when the ‘location’
is deleted, that means it’s back to being a place.</p>
<p>Keys at the top level that are not character names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'rulebooks'</span></code>, a dictionary keyed by the name of each changed
rulebook, the value being a list of rule names</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'rules'</span></code>, a dictionary keyed by the name of each changed rule,
containing any of the lists <code class="docutils literal notranslate"><span class="pre">'triggers'</span></code>, <code class="docutils literal notranslate"><span class="pre">'prereqs'</span></code>,
and <code class="docutils literal notranslate"><span class="pre">'actions'</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>slow</strong> – Whether to compare entire keyframes. Default <code class="docutils literal notranslate"><span class="pre">False</span></code>,
but we may take that approach anyway, if comparing between branches,
or between times that are far enough apart that a delta assuming
linear time would require <em>more</em> comparisons than comparing keyframes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.keep_rules_journal">
<span class="sig-name descname"><span class="pre">keep_rules_journal</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><a class="headerlink" href="#lisien.engine.Engine.keep_rules_journal" title="Link to this definition">¶</a></dt>
<dd><p>Boolean; if <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default), keep information on the behavior 
of the rules engine in the database. Makes the database rather large, 
but useful for debugging.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.keyframe_interval">
<span class="sig-name descname"><span class="pre">keyframe_interval</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.keyframe_interval" title="Link to this definition">¶</a></dt>
<dd><p>How many records to let through before automatically snapping a 
keyframe, default <code class="docutils literal notranslate"><span class="pre">1000</span></code>. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, you’ll need to call 
<code class="docutils literal notranslate"><span class="pre">snap_keyframe</span></code> yourself.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.keyframe_on_close">
<span class="sig-name descname"><span class="pre">keyframe_on_close</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><a class="headerlink" href="#lisien.engine.Engine.keyframe_on_close" title="Link to this definition">¶</a></dt>
<dd><p>Whether to snap a keyframe when closing the engine, default <code class="docutils literal notranslate"><span class="pre">True</span></code>. 
This is usually what you want, as it will make future startups faster, 
but could cause database bloat if your game runs few turns per session.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.load_at">
<span class="sig-name descname"><span class="pre">load_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Branch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Turn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tick</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.load_at"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.load_at" title="Link to this definition">¶</a></dt>
<dd><p>Load history data at the given time</p>
<p>Will load the keyframe prior to that time, and all history
data following, up to (but not including) the keyframe thereafter.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><span class="pre">Logger</span></a></span><a class="headerlink" href="#lisien.engine.Engine.logger" title="Link to this definition">¶</a></dt>
<dd><p>Logger object that we’ll write records to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id14">
<span class="sig-name descname"><span class="pre">method</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MethodStore</span></span><a class="headerlink" href="#id14" title="Link to this definition">¶</a></dt>
<dd><p>Module containing functions taking this engine as first argument. If 
absent, we’ll use a <a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.collections.FunctionStore</span></code></a> to keep 
them in a .py file in the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id15">
<span class="sig-name descname"><span class="pre">new_character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.14)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Graph</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">EdgeValDict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><span class="pre">Character</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.new_character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id15" title="Link to this definition">¶</a></dt>
<dd><p>Create and return a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>.</p>
<p>See <a class="reference internal" href="#id2" title="lisien.engine.Engine.add_character"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_character()</span></code></a> for details.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.place_cls">
<span class="sig-name descname"><span class="pre">place_cls</span></span><a class="headerlink" href="#lisien.engine.Engine.place_cls" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id16">
<span class="sig-name descname"><span class="pre">plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Plan</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id16" title="Link to this definition">¶</a></dt>
<dd><p>A context manager for ‘hypothetical’ edits.</p>
<p>Start a block of code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">orm</span><span class="o">.</span><span class="n">plan</span><span class="p">():</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>and any changes you make to the world state within that block will be
‘plans,’ meaning that they are used as defaults. The world will
obey your plan unless you make changes to the same entities outside
the plan, in which case the world will obey those, and cancel any
future plan.</p>
<p>Plans are <em>not</em> canceled when concerned entities are deleted, although
they are unlikely to be followed.</p>
<p>New branches cannot be started within plans. The <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.forward():</span></code>
optimization is disabled within a <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">orm.plan():</span></code> block, so
consider another approach instead of making a very large plan.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">reset=True</span></code> (the default), when the plan block closes,
the time will reset to when it began.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.portal_cls">
<span class="sig-name descname"><span class="pre">portal_cls</span></span><a class="headerlink" href="#lisien.engine.Engine.portal_cls" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id17">
<span class="sig-name descname"><span class="pre">prereq</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PrereqStore</span></span><a class="headerlink" href="#id17" title="Link to this definition">¶</a></dt>
<dd><p>Module containing prereq functions, taking a lisien entity and 
returning a boolean for whether to permit a rule to run. If absent, 
we’ll use a <a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.collections.FunctionStore</span></code></a> to keep them in a 
.py file in the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.random_seed">
<span class="sig-name descname"><span class="pre">random_seed</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.random_seed" title="Link to this definition">¶</a></dt>
<dd><p>An integer to initialize the randomizer. Lisien saves the state of the 
randomizer, so you only need to supply this when starting a game for the 
first time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.shutdown">
<span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">cancel_futures</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.shutdown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.shutdown" title="Link to this definition">¶</a></dt>
<dd><p>Clean-up the resources associated with the Executor.</p>
<p>It is safe to call this method several times. Otherwise, no other
methods can be called after this one.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>wait: If True then shutdown will not return until all running</dt><dd><p>futures have finished executing and the resources used by the
executor have been reclaimed.</p>
</dd>
<dt>cancel_futures: If True then shutdown will cancel all pending</dt><dd><p>futures. Futures that are completed or running will not be
cancelled.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id18">
<span class="sig-name descname"><span class="pre">snap_keyframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_worker_processes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Keyframe</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.snap_keyframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id18" title="Link to this definition">¶</a></dt>
<dd><p>Make a copy of the complete state of the world.</p>
<p>You need to do this occasionally in order to keep time travel
performant.</p>
<p>The keyframe will be saved to the database at the next call to
<code class="docutils literal notranslate"><span class="pre">flush</span></code>.</p>
<p>Return the keyframe by default. With <code class="docutils literal notranslate"><span class="pre">silent=True</span></code>,
return <code class="docutils literal notranslate"><span class="pre">None</span></code>. This is a little faster, and uses a little less
memory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.string">
<span class="sig-name descname"><span class="pre">string</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.collections.StringStore" title="lisien.collections.StringStore"><span class="pre">StringStore</span></a></span><a class="headerlink" href="#lisien.engine.Engine.string" title="Link to this definition">¶</a></dt>
<dd><p>Dictionary of strings to be used in the game; if absent, we’ll use a 
<a class="reference internal" href="#lisien.collections.StringStore" title="lisien.collections.StringStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.collections.StringStore</span></code></a> to keep them in a JSON file in 
the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.sub_mode">
<span class="sig-name descname"><span class="pre">sub_mode</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sub</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="headerlink" href="#lisien.engine.Engine.sub_mode" title="Link to this definition">¶</a></dt>
<dd><p>What kind of parallelism to use. Options are <code class="docutils literal notranslate"><span class="pre">&quot;process&quot;</span></code>, 
<code class="docutils literal notranslate"><span class="pre">&quot;interpreter&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;thread&quot;</span></code>. If left <code class="docutils literal notranslate"><span class="pre">None</span></code>, defaults to 
<code class="docutils literal notranslate"><span class="pre">&quot;interpreter&quot;</span></code>, which only works on Python 3.14 or above, 
so <code class="docutils literal notranslate"><span class="pre">&quot;process&quot;</span></code> if it’s unavailable, or, if we can’t launch processes (
perhaps because we’re on Android or in a web browser), <code class="docutils literal notranslate"><span class="pre">&quot;thread&quot;</span></code>. 
Irrelevant when <code class="docutils literal notranslate"><span class="pre">workers=0</span></code>, and ignored if <code class="docutils literal notranslate"><span class="pre">executor</span></code> is supplied; 
we’ll use whatever parallelism the <code class="docutils literal notranslate"><span class="pre">executor</span></code> does. <code class="docutils literal notranslate"><span class="pre">&quot;thread&quot;</span></code> only 
has performance benefits if you’re using a free-threaded build of Python, 
or the threads do their work in a library like Numpy that releases 
Python’s Global Interpreter Lock.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.submit">
<span class="sig-name descname"><span class="pre">submit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LambdaType</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">MethodType</span></span></em>, <em class="sig-param"><span class="positional-only-separator o"><abbr title="Positional-only parameter separator (PEP 570)"><span class="pre">/</span></abbr></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Future</span></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.submit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.submit" title="Link to this definition">¶</a></dt>
<dd><p>Submits a callable to be executed with the given arguments.</p>
<p>Schedules the callable to be executed as fn(<a href="#id19"><span class="problematic" id="id20">*</span></a>args, <a href="#id21"><span class="problematic" id="id22">**</span></a>kwargs) and returns
a Future instance representing the execution of the callable.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>A Future representing the given call.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.thing_cls">
<span class="sig-name descname"><span class="pre">thing_cls</span></span><a class="headerlink" href="#lisien.engine.Engine.thing_cls" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.engine.Engine.tick">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">tick</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tick</span></span><a class="headerlink" href="#lisien.engine.Engine.tick" title="Link to this definition">¶</a></dt>
<dd><p>A counter of how many changes have occurred this turn.</p>
<p>Can be set manually, but is more often set to the last tick in a turn
as a side effect of setting <code class="docutils literal notranslate"><span class="pre">turn</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.to_xml">
<span class="sig-name descname"><span class="pre">to_xml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xml_file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.14)"><span class="pre">IO</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.14)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.to_xml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.to_xml" title="Link to this definition">¶</a></dt>
<dd><p>Write the history of the game to XML.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xml_file_path</strong> – The file to write to, or a path to one.
If omitted, return the XML in a string.</p></li>
<li><p><strong>indent</strong> – Whether to format the XML for human eyes. Default <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>name</strong> – Optional string to use to identify your game in the XML.
If omitted, but <code class="docutils literal notranslate"><span class="pre">xml_file_path</span></code> is a path to a file, the file’s
name will be used, with the <code class="docutils literal notranslate"><span class="pre">.xml</span></code> suffix removed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id23">
<span class="sig-name descname"><span class="pre">trigger</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.ModuleType" title="(in Python v3.14)"><span class="pre">ModuleType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TriggerStore</span></span><a class="headerlink" href="#id23" title="Link to this definition">¶</a></dt>
<dd><p>Module containing trigger functions, taking a Lisien entity and 
returning a boolean for whether to run a rule. If absent, we’ll use a 
<a class="reference internal" href="#lisien.collections.FunctionStore" title="lisien.collections.FunctionStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.collections.FunctionStore</span></code></a> to keep them in a .py file in 
the <code class="docutils literal notranslate"><span class="pre">prefix</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id24">
<span class="sig-name descname"><span class="pre">turns_when</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qry</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mid_turn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">QueryResult</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.14)"><span class="pre">set</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.turns_when"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id24" title="Link to this definition">¶</a></dt>
<dd><p>Return the turns when the query held true</p>
<p>Only the state of the world at the end of the turn is considered.
To include turns where the query held true at some tick, but
became false, set <code class="docutils literal notranslate"><span class="pre">mid_turn=True</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>qry</strong> – a Query, likely constructed by comparing the result
of a call to an entity’s <code class="docutils literal notranslate"><span class="pre">historical</span></code> method with
the output of <code class="docutils literal notranslate"><span class="pre">self.alias(..)</span></code> or another
<code class="docutils literal notranslate"><span class="pre">historical(..)</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id25">
<span class="sig-name descname"><span class="pre">unload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.unload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id25" title="Link to this definition">¶</a></dt>
<dd><p>Remove everything from memory that can be removed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.engine.Engine.wayback">
<span class="sig-name descname"><span class="pre">wayback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/engine.html#Engine.wayback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.engine.Engine.wayback" title="Link to this definition">¶</a></dt>
<dd><p>Return to the time at the start of the context once it’s done</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.engine.Engine.workers">
<span class="sig-name descname"><span class="pre">workers</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><a class="headerlink" href="#lisien.engine.Engine.workers" title="Link to this definition">¶</a></dt>
<dd><p>How many processes, interpreters, or threads to use as workers for 
parallel processing. By default, Lisien will use as many workers as 
we have CPU cores. When <code class="docutils literal notranslate"><span class="pre">0</span></code>, parallel processing is disabled. Note that 
<code class="docutils literal notranslate"><span class="pre">workers=0</span></code> implies that trigger functions operate on bare Lisien 
objects, and can therefore have side effects. If you don’t want this, 
instead use <code class="docutils literal notranslate"><span class="pre">workers=1</span></code>, which <em>does</em> disable parallelism in the case 
of trigger functions.</p>
</dd></dl>

</dd></dl>

</section>
<section id="character">
<h2>character<a class="headerlink" href="#character" title="Link to this heading">¶</a></h2>
<p>Lisien’s special kind of directed graph.</p>
<p>A <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> may well represent a fictional person,
in which case the graph most likely represents a state machine, governing
that person’s behavior in the game. But anything node-graph-shaped
may be a <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a>, too; in particular, the map on
which the game’s fictional persons move and do things is itself a
<a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a>, conventionally called <code class="docutils literal notranslate"><span class="pre">&quot;physical&quot;</span></code> when
there’s only one such map in a game. A game’s fictional persons may have multiple
representations in different <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> objects;
apart from the physical map, you may have another
<a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> for the social graph, another for their
family tree, and so on. So <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> provides
“units,” which are nodes in <em>any</em> <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> that
are, somehow, a part of this one. This could mean they directly represent
the same person, or, in a strategy game, units could be other people,
or groups of people, who are under that person’s command.</p>
<p><a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> lets you assign rules to its <code class="xref py py-attr docutils literal notranslate"><span class="pre">unit</span></code>
attribute, so that the rule will be evaluated for every unit of the
<a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a>, whatever <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a>
that unit happens to be in. Nodes may be units of any number of
:class:<a href="#id26"><span class="problematic" id="id27">`</span></a>lisien.character.Character`s, which are called their “leaders”.</p>
<p id="module-lisien.character">The top level of the lisien world model, the Character.</p>
<p>Based on NetworkX DiGraph objects with various additions and
conveniences.</p>
<p>A Character is a graph that follows rules. Its rules may be assigned
to run on only some portion of it. Each Character has a <code class="docutils literal notranslate"><span class="pre">stat</span></code> property that
acts very much like a dictionary, in which you can store game-time-sensitive
data for the rules to use.</p>
<p>You can designate some nodes in one Character as units of another,
and then assign a rule to run on all of a Character’s units. This is
useful for the common case where someone in your game has a location
in the physical world (here, a Character, called ‘physical’) but also
has a behavior flowchart, or a skill tree, that isn’t part of the
physical world. In that case, the flowchart is the person’s Character,
and their node in the physical world is a unit of it.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.character.Character">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.character.</span></span><span class="sig-name descname"><span class="pre">Character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><span class="pre">Engine</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CharName</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_rulebooks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character" title="Link to this definition">¶</a></dt>
<dd><p>A digraph that follows game rules and has a containment hierarchy</p>
<p>Nodes in a Character are subcategorized into Things and
Places. Things have locations, and those locations may be Places
or other Things. To get at those, use the <cite>thing</cite> and <cite>place</cite>
mappings – but in situations where the distinction does not matter,
you may simply address the Character as a mapping, as in NetworkX.</p>
<p>Characters may have units in other Characters. These are just
nodes. You can apply rules to a Character’s units, and thus to
any collection of nodes you want, perhaps in many different
Characters. The <code class="docutils literal notranslate"><span class="pre">unit</span></code> attribute handles this. It is a mapping,
keyed by the other Character’s name, then by the name of the node
that is this Character’s unit. In the common case where a
Character has exactly one unit, it may be retrieved as
<code class="docutils literal notranslate"><span class="pre">unit.only</span></code>. When it has more than one unit, but only has
any units in a single other Character, you can get the mapping
of units in that Character as <code class="docutils literal notranslate"><span class="pre">unit.node</span></code>. Add units with the
<code class="docutils literal notranslate"><span class="pre">add_unit</span></code> method and remove them with <code class="docutils literal notranslate"><span class="pre">del_unit</span></code>.</p>
<p>You can assign rules to Characters with their <code class="docutils literal notranslate"><span class="pre">rule</span></code> attribute,
typically using it as a decorator (see <a class="reference internal" href="#module-lisien.rule" title="lisien.rule"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lisien.rule</span></code></a>). You can do the
same to some of Character’s
attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">thing.rule</span></code> to make a rule run on all Things in this Character
every turn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">place.rule</span></code> to make a rule run on all Places in this Character
every turn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node.rule</span></code> to make a rule run on all Things and Places in this
Character every turn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit.rule</span></code> to make a rule run on all the units this
Character has every turn, regardless of what Character the
unit is in</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">adj.rule</span></code> to make a rule run on all the edges this Character
has every turn</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.stat">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">stat</span></span><a class="headerlink" href="#lisien.character.Character.stat" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of game-time-sensitive data.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.place">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">place</span></span><a class="headerlink" href="#lisien.character.Character.place" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.
<a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> objects may be located in these.</p>
<p>This mapping has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every
<code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for assigning premade
rulebooks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.thing">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">thing</span></span><a class="headerlink" href="#lisien.character.Character.thing" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>,
representing the type of node that can be located in another node–either
a <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> or a <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a>.</p>
<p>This mapping a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every
<code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.node">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">node</span></span><a class="headerlink" href="#lisien.character.Character.node" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> and <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a>
objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.</p>
<p>This mapping has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every
<code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.unit">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#lisien.character.Character.unit" title="Link to this definition">¶</a></dt>
<dd><p>A two-layermapping of this character’s units in other characters.</p>
<p>Units are nodes in other characters that are in some sense part of this one. A common example in strategy
games is when a general leads an army: the general is one <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, with a graph representing the
state of their AI; the battle map is another <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>; and the general’s units, though not in the
general’s <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, are still under their command, and therefore follow rules defined on the
general’s <code class="docutils literal notranslate"><span class="pre">unit.rule</span></code> subproperty.</p>
<p>The outer layer is the name of the character. The inner layer is the name
of the unit, which may ebe a <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> or a
<a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.portal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">portal</span></span><a class="headerlink" href="#lisien.character.Character.portal" title="Link to this definition">¶</a></dt>
<dd><p>A two-layer mapping of <a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.portal.Portal</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, by origin and destination</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
<p>Aliases:  <code class="docutils literal notranslate"><span class="pre">adj</span></code>, <code class="docutils literal notranslate"><span class="pre">edge</span></code>, <code class="docutils literal notranslate"><span class="pre">succ</span></code></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.preportal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">preportal</span></span><a class="headerlink" href="#lisien.character.Character.preportal" title="Link to this definition">¶</a></dt>
<dd><p>A two-layer mapping of <a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.portal.Portal</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, by destination and origin</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
<p>Alias: <code class="docutils literal notranslate"><span class="pre">pred</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_portal">
<span class="sig-name descname"><span class="pre">add_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_portal" title="Link to this definition">¶</a></dt>
<dd><p>Connect the origin to the destination with a <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
<p>Keyword arguments are attributes of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.new_portal">
<span class="sig-name descname"><span class="pre">new_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><span class="pre">Portal</span></a></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.new_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.new_portal" title="Link to this definition">¶</a></dt>
<dd><p>Create a portal and return it</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_portals_from">
<span class="sig-name descname"><span class="pre">add_portals_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.14)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_portals_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_portals_from" title="Link to this definition">¶</a></dt>
<dd><p>Make portals for a sequence of (origin, destination) pairs</p>
<p>Actually, triples are acceptable too, in which case the third
item is a dictionary of stats for the new <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_thing">
<span class="sig-name descname"><span class="pre">add_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Stat</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Value</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_thing" title="Link to this definition">¶</a></dt>
<dd><p>Make a new Thing and set its location</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.new_thing">
<span class="sig-name descname"><span class="pre">new_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Stat</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Value</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lisien.character.Character.new_thing" title="Link to this definition">¶</a></dt>
<dd><p>Add a Thing and return it.</p>
<p>If there’s already a Thing by that name, put a number on the end.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_things_from">
<span class="sig-name descname"><span class="pre">add_things_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.14)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Stat</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Value</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_things_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_things_from" title="Link to this definition">¶</a></dt>
<dd><p>Make many new Things</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_place">
<span class="sig-name descname"><span class="pre">add_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_for_adding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_place" title="Link to this definition">¶</a></dt>
<dd><p>Add a new Place</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_places_from">
<span class="sig-name descname"><span class="pre">add_places_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.14)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_places_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_places_from" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.new_place">
<span class="sig-name descname"><span class="pre">new_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Stat</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Value</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lisien.character.Character.new_place" title="Link to this definition">¶</a></dt>
<dd><p>Add a Place and return it.</p>
<p>If there’s already a Place by that name, put a number on the end.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stat</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'units'</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UnitsAlias</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">CharacterStatAlias</span></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.historical" title="Link to this definition">¶</a></dt>
<dd><p>Get a historical view on the given stat</p>
<p>This functions like the value of the stat, but changes
when you time travel. Comparisons performed on the
historical view can be passed to <code class="docutils literal notranslate"><span class="pre">engine.turns_when</span></code>
to find out when the comparison held true.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.place2thing">
<span class="sig-name descname"><span class="pre">place2thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.place2thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.place2thing" title="Link to this definition">¶</a></dt>
<dd><p>Turn a Place into a Thing with the given location.</p>
<p>It will keep all its attached Portals.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.portals">
<span class="sig-name descname"><span class="pre">portals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Edge</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#lisien.character.Character.portals" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all portals.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.remove_portal">
<span class="sig-name descname"><span class="pre">remove_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.remove_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.remove_portal" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.remove_unit">
<span class="sig-name descname"><span class="pre">remove_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><span class="pre">Place</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><span class="pre">Thing</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><span class="pre">Character</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KeyHint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><span class="pre">Place</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><span class="pre">Thing</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.remove_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.remove_unit" title="Link to this definition">¶</a></dt>
<dd><p>This is no longer my unit, though it still exists</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.thing2place">
<span class="sig-name descname"><span class="pre">thing2place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.thing2place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.thing2place" title="Link to this definition">¶</a></dt>
<dd><p>Unset a Thing’s location, and thus turn it into a Place.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.units">
<span class="sig-name descname"><span class="pre">units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lisien.character.Character.units" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.facade">
<span class="sig-name descname"><span class="pre">facade</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CharacterFacade</span></span></span><a class="reference internal" href="../_modules/lisien/character.html#Character.facade"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.facade" title="Link to this definition">¶</a></dt>
<dd><p>Return a temporary copy of this Character</p>
<p>A Facade looks like its <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, but doesn’t do any of the
stuff Characters do to save changes to the database, nor enable
time travel. This makes it much speedier to work with.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.node">
<span id="node"></span><h2>node<a class="headerlink" href="#module-lisien.node" title="Link to this heading">¶</a></h2>
<p>The nodes of lisien’s character graphs.</p>
<p>Every node that actually exists is either a Place or a Thing, but they
have a lot in common.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.node.Node">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.node.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractCharacter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/node.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node" title="Link to this definition">¶</a></dt>
<dd><p>The fundamental graph component, which portals go between.</p>
<p>Every lisien node is either a thing or a place. They share in common
the abilities to follow rules; to be connected by portals; and to
contain things.</p>
<p>This is truthy if it exists, falsy if it’s been deleted.</p>
<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.leader">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">leader</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LeaderMapping</span></span><a class="headerlink" href="#lisien.node.Node.leader" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.portal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">portal</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dests</span></span><a class="headerlink" href="#lisien.node.Node.portal" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of portals leading out from this node.</p>
<p>Aliases <code class="docutils literal notranslate"><span class="pre">portal</span></code>, <code class="docutils literal notranslate"><span class="pre">adj</span></code>, <code class="docutils literal notranslate"><span class="pre">edge</span></code>, <code class="docutils literal notranslate"><span class="pre">successor</span></code>, and <code class="docutils literal notranslate"><span class="pre">succ</span></code>
are available.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.preportal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">preportal</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Origs</span></span><a class="headerlink" href="#lisien.node.Node.preportal" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of portals leading to this node.</p>
<p>Aliases <code class="docutils literal notranslate"><span class="pre">preportal</span></code>, <code class="docutils literal notranslate"><span class="pre">predecessor</span></code> and <code class="docutils literal notranslate"><span class="pre">pred</span></code> are available.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.content">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">content</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NodeContent</span></span><a class="headerlink" href="#lisien.node.Node.content" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <code class="docutils literal notranslate"><span class="pre">Thing</span></code> objects that are here</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.contents">
<span class="sig-name descname"><span class="pre">contents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">NodeContentValues</span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.contents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.contents" title="Link to this definition">¶</a></dt>
<dd><p>A set-like object containing <code class="docutils literal notranslate"><span class="pre">Thing</span></code> objects that are here</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.successors">
<span class="sig-name descname"><span class="pre">successors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.successors" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over nodes with edges leading from here to there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.predecessors">
<span class="sig-name descname"><span class="pre">predecessors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.predecessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.predecessors" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over nodes with edges leading here from there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.shortest_path">
<span class="sig-name descname"><span class="pre">shortest_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Stat</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.14)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.shortest_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.shortest_path" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of node names leading from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.shortest_path_length">
<span class="sig-name descname"><span class="pre">shortest_path_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stat</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.shortest_path_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.shortest_path_length" title="Link to this definition">¶</a></dt>
<dd><p>Return the length of the path from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.path_exists">
<span class="sig-name descname"><span class="pre">path_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Stat</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.path_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.path_exists" title="Link to this definition">¶</a></dt>
<dd><p>Return whether there is a path leading from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">weight</span></code>, only consider edges that have a stat by the
given name.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.new_portal">
<span class="sig-name descname"><span class="pre">new_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">KeyHint</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NodeName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Stat</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Value</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><span class="pre">Portal</span></a></span></span><a class="reference internal" href="../_modules/lisien/types.html#Node.new_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.new_portal" title="Link to this definition">¶</a></dt>
<dd><p>Connect a portal from here to another node, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.new_thing">
<span class="sig-name descname"><span class="pre">new_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KeyHint</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">KeyHint</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ValueHint</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Stat</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Value</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><span class="pre">Thing</span></a></span></span><a class="reference internal" href="../_modules/lisien/types.html#Node.new_thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.new_thing" title="Link to this definition">¶</a></dt>
<dd><p>Create a new thing, located here, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Stat</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">KeyHint</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">EntityStatAlias</span></span></span><a class="reference internal" href="../_modules/lisien/types.html#Node.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.historical" title="Link to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.delete" title="Link to this definition">¶</a></dt>
<dd><p>Get rid of this node</p>
<p>Apart from deleting the node, this also informs all its users
that it doesn’t exist and therefore can’t be their unit
anymore.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.node.Place">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.node.</span></span><span class="sig-name descname"><span class="pre">Place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractCharacter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/node.html#Place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Place" title="Link to this definition">¶</a></dt>
<dd><p>The kind of node where a thing might ultimately be located.</p>
<p>lisien entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.node.Thing">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.node.</span></span><span class="sig-name descname"><span class="pre">Thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractCharacter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/node.html#Thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Thing" title="Link to this definition">¶</a></dt>
<dd><p>The sort of item that has a particular location at any given time.</p>
<p>Things are always in Places or other Things, and may additionally be
travelling through a Portal.</p>
<p>lisien entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
</dd></dl>

</section>
<section id="module-lisien.portal">
<span id="portal"></span><h2>portal<a class="headerlink" href="#module-lisien.portal" title="Link to this heading">¶</a></h2>
<p>Directed edges, as used by lisien.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.portal.Portal">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.portal.</span></span><span class="sig-name descname"><span class="pre">Portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DiGraph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">NodeName</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/portal.html#Portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.portal.Portal" title="Link to this definition">¶</a></dt>
<dd><p>Connection between two nodes that <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> travel along</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.portal.Portal.origin">
<span class="sig-name descname"><span class="pre">origin</span></span><a class="headerlink" href="#lisien.portal.Portal.origin" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> or <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> that this leads out from</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.portal.Portal.destination">
<span class="sig-name descname"><span class="pre">destination</span></span><a class="headerlink" href="#lisien.portal.Portal.destination" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> or <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> that this leads into</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.portal.Portal.character">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#lisien.portal.Portal.character" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> that this is in</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.portal.Portal.engine">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#lisien.portal.Portal.engine" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.engine.Engine</span></code></a> that this is in</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.portal.Portal.reciprocal">
<span class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">reciprocal</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><span class="pre">Portal</span></a></span><a class="headerlink" href="#lisien.portal.Portal.reciprocal" title="Link to this definition">¶</a></dt>
<dd><p>If there’s another Portal connecting the same origin and
destination that I do, but going the opposite way, return
it. Else raise <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.portal.Portal.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Key</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">EntityStatAlias</span></span></span><a class="reference internal" href="../_modules/lisien/portal.html#Portal.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.portal.Portal.historical" title="Link to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.portal.Portal.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/portal.html#Portal.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.portal.Portal.delete" title="Link to this definition">¶</a></dt>
<dd><p>Remove myself from my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>.</p>
<p>For symmetry with <code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.rule">
<span id="rule"></span><h2>rule<a class="headerlink" href="#module-lisien.rule" title="Link to this heading">¶</a></h2>
<p>The fundamental unit of game logic, the Rule, and structures to
store and organize them in.</p>
<p>A Rule is three lists of functions: triggers, prereqs, and actions.
The actions do something, anything that you need your game to do, but
probably making a specific change to the world model. The triggers and
prereqs between them specify when the action should occur: any of its
triggers can tell it to happen, but then any of its prereqs may stop it
from happening.</p>
<p>Rules are assembled into RuleBooks, essentially just lists of Rules
that can then be assigned to be followed by any game entity –
but each game entity has its own RuleBook by default, and you never
need to change that.</p>
<p>To add a new rule to a lisien entity, the easiest thing is to use the
decorator syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@entity</span><span class="o">.</span><span class="n">rule</span>
<span class="k">def</span><span class="w"> </span><span class="nf">do_something</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>

<span class="nd">@do_something</span><span class="o">.</span><span class="n">trigger</span>
<span class="k">def</span><span class="w"> </span><span class="nf">whenever</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>

<span class="nd">@do_something</span><span class="o">.</span><span class="n">trigger</span>
<span class="k">def</span><span class="w"> </span><span class="nf">forever</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>

<span class="nd">@do_something</span><span class="o">.</span><span class="n">action</span>
<span class="k">def</span><span class="w"> </span><span class="nf">do_something_else</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>When run, this code will:</p>
<blockquote>
<div><ul class="simple">
<li><p>copy the <code class="docutils literal notranslate"><span class="pre">do_something</span></code> function to <code class="docutils literal notranslate"><span class="pre">action.py</span></code>, where lisien knows                       to run it when a rule triggers it</p></li>
<li><p>create a new rule named <code class="docutils literal notranslate"><span class="pre">'do_something'</span></code></p></li>
<li><p>set the function <code class="docutils literal notranslate"><span class="pre">do_something</span></code> as the first (and, so far, only) entry                      in the actions list of the rule by that name</p></li>
<li><p>copy the <code class="docutils literal notranslate"><span class="pre">whenever</span></code> function to <code class="docutils literal notranslate"><span class="pre">trigger.py</span></code>, where lisien knows to                       call it when a rule has it as a trigger</p></li>
<li><p>set the function <code class="docutils literal notranslate"><span class="pre">whenever</span></code> as the first entry in the triggers list                 of the rule <code class="docutils literal notranslate"><span class="pre">'do_something'</span></code></p></li>
<li><p>append the function <code class="docutils literal notranslate"><span class="pre">forever</span></code> to the same triggers list</p></li>
<li><p>copy <code class="docutils literal notranslate"><span class="pre">do_something_else</span></code> to <code class="docutils literal notranslate"><span class="pre">action.py</span></code></p></li>
<li><p>append <code class="docutils literal notranslate"><span class="pre">do_something_else</span></code> to the actions list of the rule</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">trigger</span></code>, <code class="docutils literal notranslate"><span class="pre">prereq</span></code>, and <code class="docutils literal notranslate"><span class="pre">action</span></code> attributes of Rule objects
may also be used like lists. You can put functions in them yourself,
provided they are already present in the correct module. If it’s
inconvenient to get the actual function object, use a string of
the function’s name.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.rule.Rule">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.rule.</span></span><span class="sig-name descname"><span class="pre">Rule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><span class="pre">Engine</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RuleName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">triggers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TriggerFuncName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TriggerFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereqs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><span class="pre">PrereqFuncName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PrereqFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ActionFuncName</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ActionFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighborhood</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RuleNeighborhood</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">big</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RuleBig</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule" title="Link to this definition">¶</a></dt>
<dd><p>Stuff that might happen in the simulation under some conditions</p>
<p>Rules are comprised of three lists of functions:</p>
<ul class="simple">
<li><p>actions, which mutate the world state</p></li>
<li><p>triggers, which make the actions happen</p></li>
<li><p>prereqs, which prevent the actions from happening when triggered</p></li>
</ul>
<p>Each kind of function should be stored in the appropriate module
supplied to the lisien core at startup. This makes it possible to
load the functions on later startups. You may instead use the string
name of a function already stored in the module, or use the
<code class="docutils literal notranslate"><span class="pre">trigger</span></code>, <code class="docutils literal notranslate"><span class="pre">prereq</span></code>, or <code class="docutils literal notranslate"><span class="pre">action</span></code> decorator on a new function to
add it to both the module and the rule.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.action">
<span class="sig-name descname"><span class="pre">action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ActionFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ActionFuncName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RuleFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ActionFuncName</span></span></span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.action" title="Link to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my actions list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.always">
<span class="sig-name descname"><span class="pre">always</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.always"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.always" title="Link to this definition">¶</a></dt>
<dd><p>Arrange to be triggered every turn</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.prereq">
<span class="sig-name descname"><span class="pre">prereq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PrereqFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PrereqFuncName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RuleFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">PrereqFuncName</span></span></span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.prereq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.prereq" title="Link to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my prereqs list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.trigger">
<span class="sig-name descname"><span class="pre">trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TriggerFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TriggerFuncName</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RuleFunc</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TriggerFuncName</span></span></span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.trigger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.trigger" title="Link to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my triggers list.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.query">
<span id="query"></span><h2>query<a class="headerlink" href="#module-lisien.query" title="Link to this heading">¶</a></h2>
<p>Query builder, for queries about the game’s history</p>
<p>Sometimes you want to know when some stat of a lisien entity had a particular
value. To find out, construct a historical query and pass it to
<code class="docutils literal notranslate"><span class="pre">Engine.turns_when</span></code>, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">physical</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">character</span><span class="p">[</span><span class="s1">&#39;physical&#39;</span><span class="p">]</span>
<span class="n">that</span> <span class="o">=</span> <span class="n">physical</span><span class="o">.</span><span class="n">thing</span><span class="p">[</span><span class="s1">&#39;that&#39;</span><span class="p">]</span>
<span class="n">hist_loc</span> <span class="o">=</span> <span class="n">that</span><span class="o">.</span><span class="n">historical</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">turns_when</span><span class="p">(</span><span class="n">hist_loc</span> <span class="o">==</span> <span class="s1">&#39;there&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<p>You’ll get the turns when <code class="docutils literal notranslate"><span class="pre">that</span></code> was <code class="docutils literal notranslate"><span class="pre">there</span></code>.</p>
<p>Other comparison operators like <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> work as well.</p>
</section>
<section id="module-lisien.facade">
<span id="facade"></span><h2>facade<a class="headerlink" href="#module-lisien.facade" title="Link to this heading">¶</a></h2>
<p>Low-overhead “working copies” of Lisien objects</p>
<p>Under the hood, facades store patches to the underlying entity (if any).
The changes in those patches won’t be stored permanently unless you call
the facade’s <code class="docutils literal notranslate"><span class="pre">apply()</span></code> method.</p>
<p>Facades should be constructed by calling the <code class="docutils literal notranslate"><span class="pre">facade()</span></code> method of any Lisien
entity, or of a <a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.engine.Engine</span></code></a>.</p>
</section>
</section>
<section id="internals">
<h1>Internals<a class="headerlink" href="#internals" title="Link to this heading">¶</a></h1>
<p>These modules are used by <a class="reference internal" href="#module-lisien.engine" title="lisien.engine"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lisien.engine</span></code></a> or <code class="xref py py-mod docutils literal notranslate"><span class="pre">lisien.proxy</span></code> somehow.
You shouldn’t need to know about them unless they’re broken, or you want to
extend Lisien’s capabilities.</p>
<section id="android-service">
<h2>android_service<a class="headerlink" href="#android-service" title="Link to this heading">¶</a></h2>
</section>
<section id="module-lisien.cache">
<span id="cache"></span><h2>cache<a class="headerlink" href="#module-lisien.cache" title="Link to this heading">¶</a></h2>
<p>Versioned in-memory data stores that Lisien data is kept in, once it’s loaded.</p>
<p>This module is where we keep the code for storage and retrieval of both
individual values and keyframes. It makes heavy use of the <code class="xref py py-mod docutils literal notranslate"><span class="pre">window</span></code>
module for the underlying data structures.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.cache.Cache">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.cache.</span></span><span class="sig-name descname"><span class="pre">Cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><span class="pre">Engine</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyframe_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/cache.html#Cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.cache.Cache" title="Link to this definition">¶</a></dt>
<dd><p>A data store that’s useful for tracking graph revisions.</p>
</dd></dl>

</section>
<section id="module-lisien.collections">
<span id="collections"></span><h2>collections<a class="headerlink" href="#module-lisien.collections" title="Link to this heading">¶</a></h2>
<p>Common classes for collections in lisien</p>
<p>Most of these are subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">blinker.Signal</span></code>, so you can listen
for changes using the <code class="docutils literal notranslate"><span class="pre">connect(..)</span></code> method.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.collections.StringStore">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.collections.</span></span><span class="sig-name descname"><span class="pre">StringStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.14)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_language</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'eng'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/collections.html#StringStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.collections.StringStore" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.collections.FunctionStore">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.collections.</span></span><span class="sig-name descname"><span class="pre">FunctionStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">os.PathLike</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><span class="pre">_K</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_T</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">NOTHING</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/collections.html#FunctionStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.collections.FunctionStore" title="Link to this definition">¶</a></dt>
<dd><p>A module-like object that lets you alter its code and save your changes.</p>
<p>Instantiate it with a path to a file that you want to keep the code in.
Assign functions to its attributes, then call its <code class="docutils literal notranslate"><span class="pre">save()</span></code> method,
and they’ll be unparsed and written to the file.</p>
<p>This is a <code class="docutils literal notranslate"><span class="pre">Signal</span></code>, so you can pass a function to its <code class="docutils literal notranslate"><span class="pre">connect</span></code> method,
and it will be called when a function is added, changed, or deleted.
The keyword arguments will be <code class="docutils literal notranslate"><span class="pre">attr</span></code>, the name of the function, and <code class="docutils literal notranslate"><span class="pre">val</span></code>,
the function itself.</p>
</dd></dl>

</section>
<section id="module-lisien.db">
<span id="db"></span><h2>db<a class="headerlink" href="#module-lisien.db" title="Link to this heading">¶</a></h2>
<p>Database connectors to persist Lisien’s state to disk</p>
<p>The base class, <a class="reference internal" href="#lisien.db.AbstractDatabaseConnector" title="lisien.db.AbstractDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractDatabaseConnector</span></code></a>, defines the API that
database connectors need to use. Most databases should implement
<a class="reference internal" href="#lisien.db.ThreadedDatabaseConnector" title="lisien.db.ThreadedDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadedDatabaseConnector</span></code></a>, which does background processing in a
subthread.</p>
<p>The connectors also have import/export code to save and load the whole
database. One concrete class, <a class="reference internal" href="#lisien.db.PythonDatabaseConnector" title="lisien.db.PythonDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">PythonDatabaseConnector</span></code></a>, is provided
for when that’s all the persistence you want. The other,
<a class="reference internal" href="#lisien.db.NullDatabaseConnector" title="lisien.db.NullDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullDatabaseConnector</span></code></a>, can’t import, export, or persist anything at
all; it’s not much good for anything but tests.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.db.AbstractDatabaseConnector">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.db.</span></span><span class="sig-name descname"><span class="pre">AbstractDatabaseConnector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db.html#AbstractDatabaseConnector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.AbstractDatabaseConnector" title="Link to this definition">¶</a></dt>
<dd><p>The interface between Lisien and wherever it’s storing its data</p>
<p>Currently, there are three implementations (and
<a class="reference internal" href="#lisien.db.NullDatabaseConnector" title="lisien.db.NullDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullDatabaseConnector</span></code></a>, which does nothing, suitable only for tests).
This module contains the concrete class <a class="reference internal" href="#lisien.db.PythonDatabaseConnector" title="lisien.db.PythonDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">PythonDatabaseConnector</span></code></a>,
which stores all of Lisien’s data as ordinary Python objects, to be
exported via <a class="reference internal" href="#lisien.db.AbstractDatabaseConnector.to_xml" title="lisien.db.AbstractDatabaseConnector.to_xml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_xml()</span></code></a> and later imported by <a class="reference internal" href="#lisien.db.AbstractDatabaseConnector.load_xml" title="lisien.db.AbstractDatabaseConnector.load_xml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_xml()</span></code></a>.
You should probably use the <a class="reference internal" href="#lisien.engine.Engine.export" title="lisien.engine.Engine.export"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisien.engine.Engine.export()</span></code></a>
and <a class="reference internal" href="#id11" title="lisien.engine.Engine.from_archive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisien.engine.Engine.from_archive()</span></code></a> methods instead. Lisien’s
XML files are very large, and don’t contain the game’s code, but the
archives produced by <a class="reference internal" href="#lisien.engine.Engine.export" title="lisien.engine.Engine.export"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisien.engine.Engine.export()</span></code></a> are compressed
well, and include the code.</p>
<p>To more conveniently persist the state of the game between play sessions,
the modules <code class="xref py py-mod docutils literal notranslate"><span class="pre">lisien.sql</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">lisien.pqdb</span></code> implement connectors
for SQL and ParquetDB databases, respectively. It shouldn’t be necessary
to import them directly, as <a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.engine.Engine</span></code></a> will select
the appropriate connector class itself.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lisien.db.AbstractDatabaseConnector.load_xml">
<span class="sig-name descname"><span class="pre">load_xml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xml_or_file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.14)"><span class="pre">IO</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.14)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db.html#AbstractDatabaseConnector.load_xml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.AbstractDatabaseConnector.load_xml" title="Link to this definition">¶</a></dt>
<dd><p>Restore data from an XML export</p>
<p>Supports a string with the XML in it, a path to an XML file, or
a file object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.db.AbstractDatabaseConnector.to_xml">
<span class="sig-name descname"><span class="pre">to_xml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/lisien/db.html#AbstractDatabaseConnector.to_xml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.AbstractDatabaseConnector.to_xml" title="Link to this definition">¶</a></dt>
<dd><p>Return a string XML representation of the whole database</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">load_xml</span></code> to load it later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – What to call the game in the XML.</p></li>
<li><p><strong>indent</strong> – Whether to format the XML for human readers. Default
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.db.AbstractDatabaseConnector.write_xml">
<span class="sig-name descname"><span class="pre">write_xml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.14)"><span class="pre">PathLike</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.IO" title="(in Python v3.14)"><span class="pre">IO</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.14)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/db.html#AbstractDatabaseConnector.write_xml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.AbstractDatabaseConnector.write_xml" title="Link to this definition">¶</a></dt>
<dd><p>Serialize the whole database to an XML file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – A file name, or a file object.</p></li>
<li><p><strong>name</strong> – Optional name to give to the game in the XML. Defaults
to the name of the file, minus .xml extension.</p></li>
<li><p><strong>indent</strong> – Whether to format the XML for a human reader. Default
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.db.ThreadedDatabaseConnector">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.db.</span></span><span class="sig-name descname"><span class="pre">ThreadedDatabaseConnector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db.html#ThreadedDatabaseConnector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.ThreadedDatabaseConnector" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.db.PythonDatabaseConnector">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.db.</span></span><span class="sig-name descname"><span class="pre">PythonDatabaseConnector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db.html#PythonDatabaseConnector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.PythonDatabaseConnector" title="Link to this definition">¶</a></dt>
<dd><p>Database connector that holds all data in memory</p>
<p>You’ll have to write it to disk yourself. Use the <code class="docutils literal notranslate"><span class="pre">write_xml</span></code> method
for that.</p>
<p>This does not start any threads, unlike the connectors that really
connect to databases, making it an appropriate choice if running in
an environment that lacks threading, such as WASI.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.db.NullDatabaseConnector">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.db.</span></span><span class="sig-name descname"><span class="pre">NullDatabaseConnector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db.html#NullDatabaseConnector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.NullDatabaseConnector" title="Link to this definition">¶</a></dt>
<dd><p>Database connector that does nothing, connects to no database</p>
<p>This will never return any data, either. If you want it to hold data
you put into it, instead use <a class="reference internal" href="#lisien.db.PythonDatabaseConnector" title="lisien.db.PythonDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">PythonDatabaseConnector</span></code></a>.</p>
</dd></dl>

<section id="module-lisien.db.sql">
<span id="sql"></span><h3>sql<a class="headerlink" href="#module-lisien.db.sql" title="Link to this heading">¶</a></h3>
<p>The SQLAlchemy database connector, for SQLite</p>
<p><a class="reference external" href="https://www.sqlite.org/about.html">SQLite</a> is an easy, convenient database that’s available nearly everywhere
Python is. It’s not the default database for Lisien, because the database file
it produces usually takes up hundreds of megabytes for even small games, and
takes a while to commit data. However, it’s more resilient than ParquetDB. Its
transaction model is good at recovering in case of crashes, even if those have
nothing to do with Lisien, like if an Android device runs out of battery.</p>
<p>Though only SQLite is specifically supported at the moment, this connector is
implemented using <a class="reference external" href="https://www.sqlalchemy.org/features.html">SQLAlchemy</a>, which makes it extensible to other SQL-based
databases in the future. Only <a class="reference external" href="https://docs.sqlalchemy.org/en/20/core/schema.html">a schema definition</a> and
<a class="reference external" href="https://docs.sqlalchemy.org/en/20/core/expression_api.html">the SQL expression API</a> are used here.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.db.sql.SQLAlchemyDatabaseConnector">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.db.sql.</span></span><span class="sig-name descname"><span class="pre">SQLAlchemyDatabaseConnector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sqlite:///:memory:'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">NOTHING</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db/sql.html#SQLAlchemyDatabaseConnector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.sql.SQLAlchemyDatabaseConnector" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-lisien.db.pqdb">
<span id="pqdb"></span><h3>pqdb<a class="headerlink" href="#module-lisien.db.pqdb" title="Link to this heading">¶</a></h3>
<p>The default ParquetDB database connector</p>
<p><a class="reference external" href="https://parquet.apache.org/docs/">Parquet</a> is a columnar data file format that’s good for time-series databases,
such as Lisien’s. <a class="reference external" href="https://parquetdb.readthedocs.io/en/latest/">ParquetDB</a> is a simple database-shaped interface to a bunch
of Parquet files. Where available, Lisien defaults to storing its data with
<a class="reference internal" href="#lisien.db.pqdb.ParquetDatabaseConnector" title="lisien.db.pqdb.ParquetDatabaseConnector"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.db.pqdb.ParquetDatabaseConnector</span></code></a>, so that it will be small.
However, ParquetDB often opens a lot of files at once, which can cause problems
on constrained platforms like Android.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.db.pqdb.ParquetDatabaseConnector">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.db.pqdb.</span></span><span class="sig-name descname"><span class="pre">ParquetDatabaseConnector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/db/pqdb.html#ParquetDatabaseConnector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.db.pqdb.ParquetDatabaseConnector" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="module-lisien.futures">
<span id="futures"></span><h2>futures<a class="headerlink" href="#module-lisien.futures" title="Link to this heading">¶</a></h2>
<p>Executor classes, for Lisien’s various forms of parallelism</p>
<p>Lisien’s workers are stateful–they each hold a shallow copy of the world state.
These executors keep that copy synchronized with the current state of the game.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.futures.Executor">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.futures.</span></span><span class="sig-name descname"><span class="pre">Executor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractEngine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_managing_futs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/futures.html#Executor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.futures.Executor" title="Link to this definition">¶</a></dt>
<dd><p>Abstract class for Lisien’s parallel execution</p>
<p>Starts workers in threads, processes, or interpreters, depending on which
subclass you use.</p>
<p>Usually, you don’t want to instantiate these directly –
<a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> will do it for you – but if you want to
close an <a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> while keeping its workers alive,
and reuse them when next you start the game, you can do that by creating
your own <a class="reference internal" href="#lisien.futures.Executor" title="lisien.futures.Executor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code></a>, passing it to <a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
and holding onto it until the one engine’s shut down, and it’s time to
start the next.</p>
<p>These are stateful, and can only serve one <a class="reference internal" href="#lisien.engine.Engine" title="lisien.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> at a time.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.futures.Worker">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">lisien.futures.</span></span><span class="sig-name descname"><span class="pre">Worker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.14)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Value</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/futures.html#Worker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.futures.Worker" title="Link to this definition">¶</a></dt>
<dd><p>Abstract class representing one worker in an <a class="reference internal" href="#lisien.futures.Executor" title="lisien.futures.Executor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code></a></p>
<p>Implementations may represent a worker thread in the same interpreter,
a worker thread in a subinterpreter, or a worker process.</p>
</dd></dl>

</section>
<section id="module-lisien.types">
<span id="types"></span><h2>types<a class="headerlink" href="#module-lisien.types" title="Link to this heading">¶</a></h2>
<p>Base classes and type hints for Lisien</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Lisien</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.engine">engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.engine.Engine"><code class="docutils literal notranslate"><span class="pre">Engine</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#character">character</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character"><code class="docutils literal notranslate"><span class="pre">Character</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.node">node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node"><code class="docutils literal notranslate"><span class="pre">Node</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Place"><code class="docutils literal notranslate"><span class="pre">Place</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Thing"><code class="docutils literal notranslate"><span class="pre">Thing</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.portal">portal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal"><code class="docutils literal notranslate"><span class="pre">Portal</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.rule">rule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.rule.Rule"><code class="docutils literal notranslate"><span class="pre">Rule</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.query">query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.facade">facade</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#internals">Internals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#android-service">android_service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.cache">cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.cache.Cache"><code class="docutils literal notranslate"><span class="pre">Cache</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.collections">collections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.collections.StringStore"><code class="docutils literal notranslate"><span class="pre">StringStore</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.collections.FunctionStore"><code class="docutils literal notranslate"><span class="pre">FunctionStore</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.db">db</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.db.AbstractDatabaseConnector"><code class="docutils literal notranslate"><span class="pre">AbstractDatabaseConnector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.db.ThreadedDatabaseConnector"><code class="docutils literal notranslate"><span class="pre">ThreadedDatabaseConnector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.db.PythonDatabaseConnector"><code class="docutils literal notranslate"><span class="pre">PythonDatabaseConnector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.db.NullDatabaseConnector"><code class="docutils literal notranslate"><span class="pre">NullDatabaseConnector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-lisien.db.sql">sql</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-lisien.db.pqdb">pqdb</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.futures">futures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.futures.Executor"><code class="docutils literal notranslate"><span class="pre">Executor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.futures.Worker"><code class="docutils literal notranslate"><span class="pre">Worker</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-lisien.types">types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../elide/index.html">Elide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="design.html" title="previous chapter">Design</a></li>
      <li>Next: <a href="../elide/index.html" title="next chapter">Elide</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;Zachary Spector.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.1.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/lisien/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>