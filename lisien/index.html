<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>engine &#8212; Lisien 0.19.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=cbfb3150"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Elide" href="../elide/index.html" />
    <link rel="prev" title="Design" href="design.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="engine">
<h1>engine<a class="headerlink" href="#engine" title="Link to this heading">¶</a></h1>
</section>
<section id="module-lisien.character">
<span id="character"></span><h1>character<a class="headerlink" href="#module-lisien.character" title="Link to this heading">¶</a></h1>
<p>The top level of the lisien world model, the Character.</p>
<p>Based on NetworkX DiGraph objects with various additions and
conveniences.</p>
<p>A Character is a graph that follows rules. Its rules may be assigned
to run on only some portion of it. Each Character has a <code class="docutils literal notranslate"><span class="pre">stat</span></code> property that
acts very much like a dictionary, in which you can store game-time-sensitive
data for the rules to use.</p>
<p>You can designate some nodes in one Character as units of another,
and then assign a rule to run on all of a Character’s units. This is
useful for the common case where someone in your game has a location
in the physical world (here, a Character, called ‘physical’) but also
has a behavior flowchart, or a skill tree, that isn’t part of the
physical world. In that case, the flowchart is the person’s Character,
and their node in the physical world is a unit of it.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.character.Character">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.character.</span></span><span class="sig-name descname"><span class="pre">Character</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character" title="Link to this definition">¶</a></dt>
<dd><p>A digraph that follows game rules and has a containment hierarchy</p>
<p>Nodes in a Character are subcategorized into Things and
Places. Things have locations, and those locations may be Places
or other Things. To get at those, use the <cite>thing</cite> and <cite>place</cite>
mappings – but in situations where the distinction does not matter,
you may simply address the Character as a mapping, as in NetworkX.</p>
<p>Characters may have units in other Characters. These are just
nodes. You can apply rules to a Character’s units, and thus to
any collection of nodes you want, perhaps in many different
Characters. The <code class="docutils literal notranslate"><span class="pre">unit</span></code> attribute handles this. It is a mapping,
keyed by the other Character’s name, then by the name of the node
that is this Character’s unit. In the common case where a
Character has exactly one unit, it may be retrieved as
<code class="docutils literal notranslate"><span class="pre">unit.only</span></code>. When it has more than one unit, but only has
any units in a single other Character, you can get the mapping
of units in that Character as <code class="docutils literal notranslate"><span class="pre">unit.node</span></code>. Add units with the
<code class="docutils literal notranslate"><span class="pre">add_unit</span></code> method and remove them with <code class="docutils literal notranslate"><span class="pre">del_unit</span></code>.</p>
<p>You can assign rules to Characters with their <code class="docutils literal notranslate"><span class="pre">rule</span></code> attribute,
typically using it as a decorator (see <a class="reference internal" href="#module-lisien.rule" title="lisien.rule"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lisien.rule</span></code></a>). You can do the
same to some of Character’s
attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">thing.rule</span></code> to make a rule run on all Things in this Character
every turn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">place.rule</span></code> to make a rule run on all Places in this Character
every turn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node.rule</span></code> to make a rule run on all Things and Places in this
Character every turn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit.rule</span></code> to make a rule run on all the units this
Character has every turn, regardless of what Character the
unit is in</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">adj.rule</span></code> to make a rule run on all the edges this Character
has every turn</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.stat">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stat</span></span><a class="headerlink" href="#lisien.character.Character.stat" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of game-time-sensitive data.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.place">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">place</span></span><a class="headerlink" href="#lisien.character.Character.place" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.thing">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">thing</span></span><a class="headerlink" href="#lisien.character.Character.thing" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.node">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">node</span></span><a class="headerlink" href="#lisien.character.Character.node" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> and <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>.</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.portal">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">portal</span></span><a class="headerlink" href="#lisien.character.Character.portal" title="Link to this definition">¶</a></dt>
<dd><p>A two-layer mapping of <a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.portal.Portal</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, by origin and destination</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
<p>Aliases:  <code class="docutils literal notranslate"><span class="pre">adj</span></code>, <code class="docutils literal notranslate"><span class="pre">edge</span></code>, <code class="docutils literal notranslate"><span class="pre">succ</span></code></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.preportal">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">preportal</span></span><a class="headerlink" href="#lisien.character.Character.preportal" title="Link to this definition">¶</a></dt>
<dd><p>A two-layer mapping of <a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.portal.Portal</span></code></a> objects in this <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, by destination and origin</p>
<p>Has a <code class="docutils literal notranslate"><span class="pre">rule</span></code> method for applying new rules to every <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code> here, and a <code class="docutils literal notranslate"><span class="pre">rulebook</span></code> property for
assigning premade rulebooks.</p>
<p>Alias: <code class="docutils literal notranslate"><span class="pre">pred</span></code></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.character.Character.unit">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unit</span></span><a class="headerlink" href="#lisien.character.Character.unit" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of this character’s units in other characters.</p>
<p>Units are nodes in other characters that are in some sense part of this one. A common example in strategy
games is when a general leads an army: the general is one <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, with a graph representing the
state of their AI; the battle map is another <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>; and the general’s units, though not in the
general’s <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, are still under their command, and therefore follow rules defined on the
general’s <code class="docutils literal notranslate"><span class="pre">unit.rule</span></code> subproperty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_portal">
<span class="sig-name descname"><span class="pre">add_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_portal" title="Link to this definition">¶</a></dt>
<dd><p>Connect the origin to the destination with a <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
<p>Keyword arguments are attributes of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.new_portal">
<span class="sig-name descname"><span class="pre">new_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.new_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.new_portal" title="Link to this definition">¶</a></dt>
<dd><p>Create a portal and return it</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_portals_from">
<span class="sig-name descname"><span class="pre">add_portals_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_portals_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_portals_from" title="Link to this definition">¶</a></dt>
<dd><p>Make portals for a sequence of (origin, destination) pairs</p>
<p>Actually, triples are acceptable too, in which case the third
item is a dictionary of stats for the new <code class="xref py py-class docutils literal notranslate"><span class="pre">Portal</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_thing">
<span class="sig-name descname"><span class="pre">add_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_thing" title="Link to this definition">¶</a></dt>
<dd><p>Make a new Thing and set its location</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.new_thing">
<span class="sig-name descname"><span class="pre">new_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lisien.character.Character.new_thing" title="Link to this definition">¶</a></dt>
<dd><p>Add a Thing and return it.</p>
<p>If there’s already a Thing by that name, put a number on the end.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_things_from">
<span class="sig-name descname"><span class="pre">add_things_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_things_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_things_from" title="Link to this definition">¶</a></dt>
<dd><p>Make many new Things</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_place">
<span class="sig-name descname"><span class="pre">add_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_for_adding</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_place" title="Link to this definition">¶</a></dt>
<dd><p>Add a new Place</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.add_places_from">
<span class="sig-name descname"><span class="pre">add_places_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.add_places_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.add_places_from" title="Link to this definition">¶</a></dt>
<dd><p>Take a series of place names and add the lot.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.new_place">
<span class="sig-name descname"><span class="pre">new_place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lisien.character.Character.new_place" title="Link to this definition">¶</a></dt>
<dd><p>Add a Place and return it.</p>
<p>If there’s already a Place by that name, put a number on the end.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.historical" title="Link to this definition">¶</a></dt>
<dd><p>Get a historical view on the given stat</p>
<p>This functions like the value of the stat, but changes
when you time travel. Comparisons performed on the
historical view can be passed to <code class="docutils literal notranslate"><span class="pre">engine.turns_when</span></code>
to find out when the comparison held true.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.place2thing">
<span class="sig-name descname"><span class="pre">place2thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.place2thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.place2thing" title="Link to this definition">¶</a></dt>
<dd><p>Turn a Place into a Thing with the given location.</p>
<p>It will keep all its attached Portals.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.portals">
<span class="sig-name descname"><span class="pre">portals</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.portals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.portals" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all portals.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.remove_portal">
<span class="sig-name descname"><span class="pre">remove_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.remove_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.remove_portal" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.remove_unit">
<span class="sig-name descname"><span class="pre">remove_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.remove_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.remove_unit" title="Link to this definition">¶</a></dt>
<dd><p>This is no longer my unit, though it still exists</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.thing2place">
<span class="sig-name descname"><span class="pre">thing2place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.thing2place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.thing2place" title="Link to this definition">¶</a></dt>
<dd><p>Unset a Thing’s location, and thus turn it into a Place.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.units">
<span class="sig-name descname"><span class="pre">units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lisien.character.Character.units" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.character.Character.facade">
<span class="sig-name descname"><span class="pre">facade</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/character.html#Character.facade"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.character.Character.facade" title="Link to this definition">¶</a></dt>
<dd><p>Return a temporary copy of this Character</p>
<p>A Facade looks like its <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code></a>, but doesn’t do any of the
stuff Characters do to save changes to the database, nor enable
time travel. This makes it much speedier to work with.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.node">
<span id="node"></span><h1>node<a class="headerlink" href="#module-lisien.node" title="Link to this heading">¶</a></h1>
<p>The nodes of lisien’s character graphs.</p>
<p>Every node that actually exists is either a Place or a Thing, but they
have a lot in common.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.node.Node">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.node.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/node.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node" title="Link to this definition">¶</a></dt>
<dd><p>The fundamental graph component, which portals go between.</p>
<p>Every lisien node is either a thing or a place. They share in common
the abilities to follow rules; to be connected by portals; and to
contain things.</p>
<p>This is truthy if it exists, falsy if it’s been deleted.</p>
<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.user">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">UserMapping</span></em><a class="headerlink" href="#lisien.node.Node.user" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.portal">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">portal</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dests</span></em><a class="headerlink" href="#lisien.node.Node.portal" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of portals leading out from this node.</p>
<p>Aliases <code class="docutils literal notranslate"><span class="pre">portal</span></code>, <code class="docutils literal notranslate"><span class="pre">adj</span></code>, <code class="docutils literal notranslate"><span class="pre">edge</span></code>, <code class="docutils literal notranslate"><span class="pre">successor</span></code>, and <code class="docutils literal notranslate"><span class="pre">succ</span></code>
are available.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.preportal">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">preportal</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Origs</span></em><a class="headerlink" href="#lisien.node.Node.preportal" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of portals leading to this node.</p>
<p>Aliases <code class="docutils literal notranslate"><span class="pre">preportal</span></code>, <code class="docutils literal notranslate"><span class="pre">predecessor</span></code> and <code class="docutils literal notranslate"><span class="pre">pred</span></code> are available.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.node.Node.content">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NodeContent</span></em><a class="headerlink" href="#lisien.node.Node.content" title="Link to this definition">¶</a></dt>
<dd><p>A mapping of <code class="docutils literal notranslate"><span class="pre">Thing</span></code> objects that are here</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.contents">
<span class="sig-name descname"><span class="pre">contents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">NodeContentValues</span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.contents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.contents" title="Link to this definition">¶</a></dt>
<dd><p>A set-like object containing <code class="docutils literal notranslate"><span class="pre">Thing</span></code> objects that are here</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.successors">
<span class="sig-name descname"><span class="pre">successors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><span class="pre">Place</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.successors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.successors" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over nodes with edges leading from here to there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.predecessors">
<span class="sig-name descname"><span class="pre">predecessors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><span class="pre">Place</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.predecessors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.predecessors" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over nodes with edges leading here from there.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.shortest_path">
<span class="sig-name descname"><span class="pre">shortest_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.13)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.shortest_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.shortest_path" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of node names leading from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.shortest_path_length">
<span class="sig-name descname"><span class="pre">shortest_path_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Key</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.shortest_path_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.shortest_path_length" title="Link to this definition">¶</a></dt>
<dd><p>Return the length of the path from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.path_exists">
<span class="sig-name descname"><span class="pre">path_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TypeAliasForwardRef</span><span class="p"><span class="pre">(</span></span><span class="s"><span class="pre">'Key'</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.path_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.path_exists" title="Link to this definition">¶</a></dt>
<dd><p>Return whether there is a path leading from me to <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">weight</span></code>, only consider edges that have a stat by the
given name.</p>
<p>Raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">dest</span></code> is not a node in my character
or the name of one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.new_portal">
<span class="sig-name descname"><span class="pre">new_portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#lisien.node.Node" title="lisien.node.Node"><span class="pre">Node</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><span class="pre">lisien.portal.Portal</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.new_portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.new_portal" title="Link to this definition">¶</a></dt>
<dd><p>Connect a portal from here to another node, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.new_thing">
<span class="sig-name descname"><span class="pre">new_thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><span class="pre">Thing</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.new_thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.new_thing" title="Link to this definition">¶</a></dt>
<dd><p>Create a new thing, located here, and return it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.13)"><span class="pre">frozenset</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Key</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">StatusAlias</span></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.historical" title="Link to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Node.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Node.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Node.delete" title="Link to this definition">¶</a></dt>
<dd><p>Get rid of this, starting now.</p>
<p>Apart from deleting the node, this also informs all its users
that it doesn’t exist and therefore can’t be their unit
anymore.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.node.Place">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.node.</span></span><span class="sig-name descname"><span class="pre">Place</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/node.html#Place"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Place" title="Link to this definition">¶</a></dt>
<dd><p>The kind of node where a thing might ultimately be located.</p>
<p>lisien entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Place.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Place.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Place.delete" title="Link to this definition">¶</a></dt>
<dd><p>Remove myself from the world model immediately.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.node.Thing">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.node.</span></span><span class="sig-name descname"><span class="pre">Thing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">character</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/node.html#Thing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Thing" title="Link to this definition">¶</a></dt>
<dd><p>The sort of item that has a particular location at any given time.</p>
<p>Things are always in Places or other Things, and may additionally be
travelling through a Portal.</p>
<p>lisien entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Thing.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Thing.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Thing.clear" title="Link to this definition">¶</a></dt>
<dd><p>Unset everything.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.node.Thing.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/node.html#Thing.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.node.Thing.delete" title="Link to this definition">¶</a></dt>
<dd><p>Get rid of this, starting now.</p>
<p>Apart from deleting the node, this also informs all its users
that it doesn’t exist and therefore can’t be their unit
anymore.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.portal">
<span id="portal"></span><h1>portal<a class="headerlink" href="#module-lisien.portal" title="Link to this heading">¶</a></h1>
<p>Directed edges, as used by lisien.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.portal.Portal">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.portal.</span></span><span class="sig-name descname"><span class="pre">Portal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractCharacter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/portal.html#Portal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.portal.Portal" title="Link to this definition">¶</a></dt>
<dd><p>Connection between two nodes that <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> travel along</p>
<p>lisien entities are truthy so long as they exist, falsy if they’ve
been deleted.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.portal.Portal.origin">
<span class="sig-name descname"><span class="pre">origin</span></span><a class="headerlink" href="#lisien.portal.Portal.origin" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> or <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> that this leads out from</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lisien.portal.Portal.destination">
<span class="sig-name descname"><span class="pre">destination</span></span><a class="headerlink" href="#lisien.portal.Portal.destination" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.node.Place" title="lisien.node.Place"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Place</span></code></a> or <a class="reference internal" href="#lisien.node.Thing" title="lisien.node.Thing"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.node.Thing</span></code></a> that this leads into</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.portal.Portal.character">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">character</span></span><a class="headerlink" href="#lisien.portal.Portal.character" title="Link to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#lisien.character.Character" title="lisien.character.Character"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.character.Character</span></code></a> that this is in</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.portal.Portal.engine">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#lisien.portal.Portal.engine" title="Link to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">lisien.engine.Engine</span></code> that this is in</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lisien.portal.Portal.reciprocal">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reciprocal</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lisien.portal.Portal" title="lisien.portal.Portal"><span class="pre">Portal</span></a></em><a class="headerlink" href="#lisien.portal.Portal.reciprocal" title="Link to this definition">¶</a></dt>
<dd><p>If there’s another Portal connecting the same origin and
destination that I do, but going the opposite way, return
it. Else raise KeyError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.portal.Portal.historical">
<span class="sig-name descname"><span class="pre">historical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Key</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">StatusAlias</span></span></span><a class="reference internal" href="../_modules/lisien/portal.html#Portal.historical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.portal.Portal.historical" title="Link to this definition">¶</a></dt>
<dd><p>Return a reference to the values that a stat has had in the past.</p>
<p>You can use the reference in comparisons to make a history
query, and execute the query by calling it, or passing it to
<code class="docutils literal notranslate"><span class="pre">self.engine.ticks_when</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.portal.Portal.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/lisien/portal.html#Portal.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.portal.Portal.delete" title="Link to this definition">¶</a></dt>
<dd><p>Remove myself from my <code class="xref py py-class docutils literal notranslate"><span class="pre">Character</span></code>.</p>
<p>For symmetry with <code class="xref py py-class docutils literal notranslate"><span class="pre">Thing</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Place</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.rule">
<span id="rule"></span><h1>rule<a class="headerlink" href="#module-lisien.rule" title="Link to this heading">¶</a></h1>
<p>The fundamental unit of game logic, the Rule, and structures to
store and organize them in.</p>
<p>A Rule is three lists of functions: triggers, prereqs, and actions.
The actions do something, anything that you need your game to do, but
probably making a specific change to the world model. The triggers and
prereqs between them specify when the action should occur: any of its
triggers can tell it to happen, but then any of its prereqs may stop it
from happening.</p>
<p>Rules are assembled into RuleBooks, essentially just lists of Rules
that can then be assigned to be followed by any game entity –
but each game entity has its own RuleBook by default, and you never
need to change that.</p>
<p>To add a new rule to a lisien entity, the easiest thing is to use the
decorator syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@entity</span><span class="o">.</span><span class="n">rule</span>
<span class="k">def</span><span class="w"> </span><span class="nf">do_something</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>

<span class="nd">@do_something</span><span class="o">.</span><span class="n">trigger</span>
<span class="k">def</span><span class="w"> </span><span class="nf">whenever</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>

<span class="nd">@do_something</span><span class="o">.</span><span class="n">trigger</span>
<span class="k">def</span><span class="w"> </span><span class="nf">forever</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>

<span class="nd">@do_something</span><span class="o">.</span><span class="n">action</span>
<span class="k">def</span><span class="w"> </span><span class="nf">do_something_else</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>When run, this code will:</p>
<blockquote>
<div><ul class="simple">
<li><p>copy the <code class="docutils literal notranslate"><span class="pre">do_something</span></code> function to <code class="docutils literal notranslate"><span class="pre">action.py</span></code>, where lisien knows                       to run it when a rule triggers it</p></li>
<li><p>create a new rule named <code class="docutils literal notranslate"><span class="pre">'do_something'</span></code></p></li>
<li><p>set the function <code class="docutils literal notranslate"><span class="pre">do_something</span></code> as the first (and, so far, only) entry                      in the actions list of the rule by that name</p></li>
<li><p>copy the <code class="docutils literal notranslate"><span class="pre">whenever</span></code> function to <code class="docutils literal notranslate"><span class="pre">trigger.py</span></code>, where lisien knows to                       call it when a rule has it as a trigger</p></li>
<li><p>set the function <code class="docutils literal notranslate"><span class="pre">whenever</span></code> as the first entry in the triggers list                 of the rule <code class="docutils literal notranslate"><span class="pre">'do_something'</span></code></p></li>
<li><p>append the function <code class="docutils literal notranslate"><span class="pre">forever</span></code> to the same triggers list</p></li>
<li><p>copy <code class="docutils literal notranslate"><span class="pre">do_something_else</span></code> to <code class="docutils literal notranslate"><span class="pre">action.py</span></code></p></li>
<li><p>append <code class="docutils literal notranslate"><span class="pre">do_something_else</span></code> to the actions list of the rule</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">trigger</span></code>, <code class="docutils literal notranslate"><span class="pre">prereq</span></code>, and <code class="docutils literal notranslate"><span class="pre">action</span></code> attributes of Rule objects
may also be used like lists. You can put functions in them yourself,
provided they are already present in the correct module. If it’s
inconvenient to get the actual function object, use a string of
the function’s name.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.rule.Rule">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.rule.</span></span><span class="sig-name descname"><span class="pre">Rule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triggers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prereqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighborhood</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">big</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule" title="Link to this definition">¶</a></dt>
<dd><p>Stuff that might happen in the simulation under some conditions</p>
<p>Rules are comprised of three lists of functions:</p>
<ul class="simple">
<li><p>actions, which mutate the world state</p></li>
<li><p>triggers, which make the actions happen</p></li>
<li><p>prereqs, which prevent the actions from happening when triggered</p></li>
</ul>
<p>Each kind of function should be stored in the appropriate module
supplied to the lisien core at startup. This makes it possible to
load the functions on later startups. You may instead use the string
name of a function already stored in the module, or use the
<code class="docutils literal notranslate"><span class="pre">trigger</span></code>, <code class="docutils literal notranslate"><span class="pre">prereq</span></code>, or <code class="docutils literal notranslate"><span class="pre">action</span></code> decorator on a new function to
add it to both the module and the rule.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.action">
<span class="sig-name descname"><span class="pre">action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.action" title="Link to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my actions list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.always">
<span class="sig-name descname"><span class="pre">always</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.always"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.always" title="Link to this definition">¶</a></dt>
<dd><p>Arrange to be triggered every turn</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.duplicate">
<span class="sig-name descname"><span class="pre">duplicate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.duplicate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.duplicate" title="Link to this definition">¶</a></dt>
<dd><p>Return a new rule that’s just like this one, but under a new
name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.prereq">
<span class="sig-name descname"><span class="pre">prereq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.prereq"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.prereq" title="Link to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my prereqs list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lisien.rule.Rule.trigger">
<span class="sig-name descname"><span class="pre">trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/rule.html#Rule.trigger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.rule.Rule.trigger" title="Link to this definition">¶</a></dt>
<dd><p>Decorator to append the function to my triggers list.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lisien.query">
<span id="query"></span><h1>query<a class="headerlink" href="#module-lisien.query" title="Link to this heading">¶</a></h1>
<p>Database access and query builder</p>
<p>The main class here is <code class="xref py py-class docutils literal notranslate"><span class="pre">QueryEngine</span></code>, which mostly just runs
SQL on demand – but, for the most common insert commands, it keeps
a queue of data to insert, which is then serialized and inserted
with a call to <code class="docutils literal notranslate"><span class="pre">flush</span></code>.</p>
<p>Sometimes you want to know when some stat of a lisien entity had a particular
value. To find out, construct a historical query and pass it to
<code class="docutils literal notranslate"><span class="pre">Engine.turns_when</span></code>, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">physical</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">character</span><span class="p">[</span><span class="s1">&#39;physical&#39;</span><span class="p">]</span>
<span class="n">that</span> <span class="o">=</span> <span class="n">physical</span><span class="o">.</span><span class="n">thing</span><span class="p">[</span><span class="s1">&#39;that&#39;</span><span class="p">]</span>
<span class="n">hist_loc</span> <span class="o">=</span> <span class="n">that</span><span class="o">.</span><span class="n">historical</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">turns_when</span><span class="p">(</span><span class="n">hist_loc</span> <span class="o">==</span> <span class="s1">&#39;there&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<p>You’ll get the turns when <code class="docutils literal notranslate"><span class="pre">that</span></code> was <code class="docutils literal notranslate"><span class="pre">there</span></code>.</p>
<p>Other comparison operators like <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> work as well.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.query.QueryResult">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.query.</span></span><span class="sig-name descname"><span class="pre">QueryResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">windows_l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windows_r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_of_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/query.html#QueryResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.query.QueryResult" title="Link to this definition">¶</a></dt>
<dd><p>A slightly lazy tuple-like object holding a history query’s results</p>
<p>Testing for membership of a turn number in a QueryResult only evaluates
the predicate for that turn number, and testing for membership of nearby
turns is fast. Accessing the start or the end of the QueryResult only
evaluates the initial or final item. Other forms of access cause the whole
query to be evaluated in parallel.</p>
</dd></dl>

</section>
<section id="module-lisien.xcollections">
<span id="xcollections"></span><h1>xcollections<a class="headerlink" href="#module-lisien.xcollections" title="Link to this heading">¶</a></h1>
<p>Common classes for collections in lisien</p>
<p>Notably includes wrappers for mutable objects, allowing them to be stored in
the database. These simply store the new value.</p>
<p>Most of these are subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">blinker.Signal</span></code>, so you can listen
for changes using the <code class="docutils literal notranslate"><span class="pre">connect(..)</span></code> method.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lisien.xcollections.StringStore">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.xcollections.</span></span><span class="sig-name descname"><span class="pre">StringStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eng'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/xcollections.html#StringStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.xcollections.StringStore" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lisien.xcollections.FunctionStore">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lisien.xcollections.</span></span><span class="sig-name descname"><span class="pre">FunctionStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lisien/xcollections.html#FunctionStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lisien.xcollections.FunctionStore" title="Link to this definition">¶</a></dt>
<dd><p>A module-like object that lets you alter its code and save your changes.</p>
<p>Instantiate it with a path to a file that you want to keep the code in.
Assign functions to its attributes, then call its <code class="docutils literal notranslate"><span class="pre">save()</span></code> method,
and they’ll be unparsed and written to the file.</p>
<p>This is a <code class="docutils literal notranslate"><span class="pre">Signal</span></code>, so you can pass a function to its <code class="docutils literal notranslate"><span class="pre">connect</span></code> method,
and it will be called when a function is added, changed, or deleted.
The keyword arguments will be <code class="docutils literal notranslate"><span class="pre">attr</span></code>, the name of the function, and <code class="docutils literal notranslate"><span class="pre">val</span></code>,
the function itself.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Lisien</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-lisien.character">character</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lisien.character.Character"><code class="docutils literal notranslate"><span class="pre">Character</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.stat"><code class="docutils literal notranslate"><span class="pre">Character.stat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.place"><code class="docutils literal notranslate"><span class="pre">Character.place</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.thing"><code class="docutils literal notranslate"><span class="pre">Character.thing</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.node"><code class="docutils literal notranslate"><span class="pre">Character.node</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.portal"><code class="docutils literal notranslate"><span class="pre">Character.portal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.preportal"><code class="docutils literal notranslate"><span class="pre">Character.preportal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.unit"><code class="docutils literal notranslate"><span class="pre">Character.unit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.add_portal"><code class="docutils literal notranslate"><span class="pre">Character.add_portal()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.new_portal"><code class="docutils literal notranslate"><span class="pre">Character.new_portal()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.add_portals_from"><code class="docutils literal notranslate"><span class="pre">Character.add_portals_from()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.add_thing"><code class="docutils literal notranslate"><span class="pre">Character.add_thing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.new_thing"><code class="docutils literal notranslate"><span class="pre">Character.new_thing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.add_things_from"><code class="docutils literal notranslate"><span class="pre">Character.add_things_from()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.add_place"><code class="docutils literal notranslate"><span class="pre">Character.add_place()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.add_places_from"><code class="docutils literal notranslate"><span class="pre">Character.add_places_from()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.new_place"><code class="docutils literal notranslate"><span class="pre">Character.new_place()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.historical"><code class="docutils literal notranslate"><span class="pre">Character.historical()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.place2thing"><code class="docutils literal notranslate"><span class="pre">Character.place2thing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.portals"><code class="docutils literal notranslate"><span class="pre">Character.portals()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.remove_portal"><code class="docutils literal notranslate"><span class="pre">Character.remove_portal()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.remove_unit"><code class="docutils literal notranslate"><span class="pre">Character.remove_unit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.thing2place"><code class="docutils literal notranslate"><span class="pre">Character.thing2place()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.units"><code class="docutils literal notranslate"><span class="pre">Character.units()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.character.Character.facade"><code class="docutils literal notranslate"><span class="pre">Character.facade()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-lisien.node">node</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lisien.node.Node"><code class="docutils literal notranslate"><span class="pre">Node</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.user"><code class="docutils literal notranslate"><span class="pre">Node.user</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.portal"><code class="docutils literal notranslate"><span class="pre">Node.portal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.preportal"><code class="docutils literal notranslate"><span class="pre">Node.preportal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.content"><code class="docutils literal notranslate"><span class="pre">Node.content</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.contents"><code class="docutils literal notranslate"><span class="pre">Node.contents()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.successors"><code class="docutils literal notranslate"><span class="pre">Node.successors()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.predecessors"><code class="docutils literal notranslate"><span class="pre">Node.predecessors()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.shortest_path"><code class="docutils literal notranslate"><span class="pre">Node.shortest_path()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.shortest_path_length"><code class="docutils literal notranslate"><span class="pre">Node.shortest_path_length()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.path_exists"><code class="docutils literal notranslate"><span class="pre">Node.path_exists()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.new_portal"><code class="docutils literal notranslate"><span class="pre">Node.new_portal()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.new_thing"><code class="docutils literal notranslate"><span class="pre">Node.new_thing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.historical"><code class="docutils literal notranslate"><span class="pre">Node.historical()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Node.delete"><code class="docutils literal notranslate"><span class="pre">Node.delete()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lisien.node.Place"><code class="docutils literal notranslate"><span class="pre">Place</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Place.delete"><code class="docutils literal notranslate"><span class="pre">Place.delete()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lisien.node.Thing"><code class="docutils literal notranslate"><span class="pre">Thing</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Thing.clear"><code class="docutils literal notranslate"><span class="pre">Thing.clear()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.node.Thing.delete"><code class="docutils literal notranslate"><span class="pre">Thing.delete()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-lisien.portal">portal</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lisien.portal.Portal"><code class="docutils literal notranslate"><span class="pre">Portal</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.origin"><code class="docutils literal notranslate"><span class="pre">Portal.origin</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.destination"><code class="docutils literal notranslate"><span class="pre">Portal.destination</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.character"><code class="docutils literal notranslate"><span class="pre">Portal.character</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.engine"><code class="docutils literal notranslate"><span class="pre">Portal.engine</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.reciprocal"><code class="docutils literal notranslate"><span class="pre">Portal.reciprocal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.historical"><code class="docutils literal notranslate"><span class="pre">Portal.historical()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.portal.Portal.delete"><code class="docutils literal notranslate"><span class="pre">Portal.delete()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-lisien.rule">rule</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lisien.rule.Rule"><code class="docutils literal notranslate"><span class="pre">Rule</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lisien.rule.Rule.action"><code class="docutils literal notranslate"><span class="pre">Rule.action()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.rule.Rule.always"><code class="docutils literal notranslate"><span class="pre">Rule.always()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.rule.Rule.duplicate"><code class="docutils literal notranslate"><span class="pre">Rule.duplicate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.rule.Rule.prereq"><code class="docutils literal notranslate"><span class="pre">Rule.prereq()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lisien.rule.Rule.trigger"><code class="docutils literal notranslate"><span class="pre">Rule.trigger()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-lisien.query">query</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lisien.query.QueryResult"><code class="docutils literal notranslate"><span class="pre">QueryResult</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-lisien.xcollections">xcollections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#lisien.xcollections.StringStore"><code class="docutils literal notranslate"><span class="pre">StringStore</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#lisien.xcollections.FunctionStore"><code class="docutils literal notranslate"><span class="pre">FunctionStore</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../elide/index.html">Elide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="design.html" title="previous chapter">Design</a></li>
      <li>Next: <a href="../elide/index.html" title="next chapter">Elide</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;Zachary Spector.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/lisien/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>